<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>Антон Шувалов</title>
 <link href="http://anton-shuvalov.info/atom.xml" rel="self"/>
 <link href="http://anton-shuvalov.info"/>
 <updated>2013-01-13T15:48:49+06:00</updated>
 <id>http://anton-shuvalov.info</id>
 <author>
   <name>Антон Шувалов</name>
   <email>anton_shuvalov@me.com</email>
 </author>

 
 <entry>
   <title>JavaScript и jQuery</title>
   <link href="http://anton-shuvalov.info/2013/01/11/jquery-and-js"/>
   <updated>2013-01-11T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2013/01/11/jquery-and-js</id>
   <content type="html">&lt;p&gt;Последнее время стараюсь не использовать jQuery без серьезной необходимости. Я часто занимаюсь разработкой небольших интерактивных элементов для книг, созданных в Adobe InDesign и iBooks Author. Здесь вполне можно обойтись с помощью natiive JS.&lt;/p&gt;

&lt;p&gt;Основные средства, которые я использую — это CSS и нативный JavaScript. &lt;a href='http://www.w3.org/TR/css3-transitions/'&gt;CSS3 Transition&lt;/a&gt; и &lt;a href='http://www.w3.org/TR/css3-animations/'&gt;CSS3 Animations&lt;/a&gt; решают практически все задачи связанные с анимацией. &lt;a href='http://www.w3.org/TR/html-markup/audio.html'&gt;HTML5 Audio&lt;/a&gt; идеально подходит для звука.&lt;/p&gt;

&lt;p&gt;32KB jQuery за бортом моей шлюпки. Я не напишу свой код более компактно с jQuery. Я вполне обойдусь без &lt;a href='http://sizzlejs.com/'&gt;sizzle&lt;/a&gt;. Вряд ли есть какой-то смысл использовать jQuery, если код проекта в сумме занимает меньше места, чем код jQuery.&lt;/p&gt;

&lt;p&gt;Я написал для себя 3 функции, которых мне достаточно для небольших проектов: &lt;pre&gt;&lt;code class='javascript'&gt;function $( id ) {
	return document.getElementById( id )
}&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class='javascript'&gt;function addClass(el, className) {
	el.setAttribute( &quot;class&quot;,  el.getAttribute( &quot;class&quot; ) + &quot; &quot; + className )
}&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code class='javascript'&gt;function removeClass( el, className ) {
	var classes = el.getAttribute( &quot;class&quot; )
	classes = classes.replace( className, &quot;&quot; )
	classes = classes.replace(/^\s\s*/, '').replace(/\s\s*$/, '')
	el.setAttribute( &quot;class&quot;, classes )
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Первая функция получает DOM-элемент по его ID. Для JS я использую ID, для CSS я использую классы. Как минимум потому, что ID &lt;a href='http://codepen.io/chriscoyier/pen/lzjqh'&gt;имеет вес, который в 255 раз больше, чем вес класса&lt;/a&gt;, и его использование для стилей может нарушить тонкий баланс силы. Пример: &lt;pre&gt;&lt;code class='javascript'&gt;var el = $('js-id');&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Вторая функция добавляет элементу класс. &lt;pre&gt;&lt;code class='javascript'&gt;addClass( el, 'my-class' )&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Третья функция удаляет класс у элемента. &lt;pre&gt;&lt;code class='javascript'&gt;removeClass( el, 'my-class' )&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;С помощью этих трех функций я вполне обхожусь без jQuery в большинстве виджетов, которые мне приходилось программировать, что положительно сказывается на предсказуемости и скорости работы.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Как я ипользую статический IP</title>
   <link href="http://anton-shuvalov.info/2013/01/08/static_ip"/>
   <updated>2013-01-08T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2013/01/08/static_ip</id>
   <content type="html">&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/ip-address-with-mouse.png' /&gt;&lt;/p&gt;

&lt;p&gt;Я решил купить статический IP. Решил купить давно. Больше года назад. Но купил только сейчас. В принципе, цена, вполне меня устраивает — 450 рублей за подключение и 20 рублей в месяц за аренду IP. Статический IP адрес мне понадобится для того, что бы привязать к домену сайт или сервис, который я буду размещать на своем сервере. Кроме этого я решил осуществить давнишнюю мечту — иметь доступ к своим домашним устройствам и сервисам из любого места.&lt;/p&gt;

&lt;p&gt;Устройств и сервисов, которые я бы хотел видеть снаружи, у меня немного есть. А есть у меня роутер NetGear 3500L с DD-WRT на борту. В нем жесткий диск на 320Gb и торрент-клиент. И есть у меня домашний сервер, за состоянием которого я хочу иногда присматривать. Есть немного интересных штук, но я пока не добрался до них.&lt;/p&gt;

&lt;p&gt;Подытожу. Я хочу привязать к своему домену такие штуки, как:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;SSH сервера&lt;/li&gt;
	&lt;li&gt;Состояние сервера (webmin)&lt;/li&gt;
	&lt;li&gt;Веб-сервер (его пока не трогаю)&lt;/li&gt;
	&lt;li&gt;SSH роутера&lt;/li&gt;
	&lt;li&gt;Веб-интерфайс роутера&lt;/li&gt;
	&lt;li&gt;Торрент клиент&lt;/li&gt;
	&lt;li&gt;FTP-сервер (его тоже не трогаю)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id='id16'&gt;План&lt;/h2&gt;

&lt;p&gt;Во-первых, нужно привязать субдомены (например, torrents.anton-shuvalov.info, webmin.anton-shuvalov.info) к своему статическому IP адресу, потом подвинуть с 80 порта веб-интерфейс DD-WRT, а на 80-ом поднять nginx. На nginx пробросить прокси ко всем сервисам, вроде: &lt;pre&gt;&lt;code&gt;torrents.anton-shuvalov.info &gt; 192.168.0.1:9091&lt;/code&gt;&lt;/pre&gt; &lt;em&gt;Кстати, предупреждаю. Естественно все IP, субдомены и другая приватная информация дальше по тексту не настоящие&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id='____ip'&gt;Как привязать домен к IP&lt;/h2&gt;

&lt;p&gt;Привязка домена к IP делается с помощью &lt;code&gt;A записи&lt;/code&gt; на NS-сервере к которому привязан домен. Мой домен привязан к NS-серверам &lt;a href='http://selectel.ru'&gt;selectel&lt;/a&gt;. Создать там &lt;code&gt;A запись&lt;/code&gt; очень просто, хотя я не думаю, что где-то это будет сложнее. В панели управления нужно перейти на вкладку &lt;code&gt;домены&lt;/code&gt;, дальше выбрать домен, ну и нажать на кнопку &amp;#8220;добавить запись&amp;#8221;. В значении &amp;#8220;хост&amp;#8221; пишу &lt;code&gt;webmin.anton-shuvalov.info&lt;/code&gt;, &amp;#8220;тип&amp;#8221; — &lt;code&gt;A&lt;/code&gt;, &amp;#8220;Значение&amp;#8221; — указываю свой IP.&lt;/p&gt;
&lt;a href='http://31808.selcdn.ru/it-prm/pics/selectel-domains.jpg'&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/selectel-domains.jpg' /&gt;&lt;/a&gt;
&lt;h2 id='ssh'&gt;SSH&lt;/h2&gt;

&lt;p&gt;На MacBook я создал пару профилей SSH — до консоли роутера, и до консоли домашнего сервера. Создаются такие профили в файле &lt;code&gt;~/.ssh/config&lt;/code&gt;. Два моих профиля выглядят примерно так:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Host ayanami
	# My home server
	HostName myip
	RemoteForward 52698 127.0.0.1:52698 # для rmate
	User user
	Port 11132 # В DD-WRT нужно пробросить этот порт на локальный IP сервера на 22-ой порт
	
Host router
	# My home router
	HostName myip
	User root
	Port 22&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;В файле &lt;code&gt;/etc/hosts&lt;/code&gt; я сделал запись такого вида: &lt;pre&gt;&lt;code&gt;44.144.244.233 myip # home&lt;/code&gt;&lt;/pre&gt; Это нужно для того, что бы в конфиге SSH зарезолвить myip в корректный IP-адрес.&lt;/p&gt;

&lt;h2 id='_ddwrt'&gt;Настройка DD-WRT&lt;/h2&gt;

&lt;p&gt;В DD-WRT нужно сделать две вещи для того, чтобы запрос к субдомену доходил до моего еще не установленного проксирующего сервера на nginx, который, собственно, и будет разбираться с тем, что и куда перенаправить.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Во-первых нужно подвинуть веб-интерфейс с 80-ого порта на, например, 81-ый порт (есть альтернативный вариант — перевести веб-интерфейс с &lt;code&gt;http&lt;/code&gt; на &lt;code&gt;https&lt;/code&gt;, но я его не пробовал).&lt;/li&gt;

&lt;li&gt;Во-вторых нужно пробросить 80-ый порт до сервера, на котором будет работать nginx.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id='__'&gt;Меняем порт веб-интерфейса&lt;/h4&gt;

&lt;p&gt;Что бы сменить порт интерфейса нужно выполнить в консоли роутера следующие строки &lt;pre&gt;&lt;code&gt;nvram set http_lanport=81
nvram commit
reboot&lt;/code&gt;&lt;/pre&gt; После перезагрузки интерфейс откроется по адресу &lt;code&gt;http://192.168.0.1:81&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id='_80_'&gt;Пробрасываем 80-ый порт&lt;/h4&gt;

&lt;p&gt;Здесь нет ничего сложного. Нужная форма находится в &lt;code&gt;NAT/QoS &amp;gt; Port Forwarding&lt;/code&gt;. Слева направо название, входящий порт, протокол (TCP, UDP или оба), внутренний IP и его порт. Внутренний IP сервера у меня 192.16810.101, порт 80-ый.&lt;/p&gt;
&lt;a href='http://31808.selcdn.ru/it-prm/pics/dd-wrt_port-forwerding.jpg'&gt;&lt;img alt='проброс портов dd-wrt' src='http://31808.selcdn.ru/it-prm/pics/dd-wrt_port-forwerding.jpg' /&gt;&lt;/a&gt;
&lt;h2 id='_nginx__debian'&gt;Установа nginx в debian&lt;/h2&gt;

&lt;p&gt;Установка nginx была не особенно гладкой. Ну как, не особенно. Я решил поставить из &lt;code&gt;aptitude&lt;/code&gt;, после этого часа два пытался настроить &lt;code&gt;nginx proxy_pass&lt;/code&gt;, и, в итоге, измученного и злого, меня озорило: &lt;pre&gt;&lt;code&gt;rei@ayanami:~/$ /usr/sbin/nginx  -v
nginx version: nginx/0.7.67&lt;/code&gt;&lt;/pre&gt; Уже вышел &lt;code&gt;nginx/1.2.6&lt;/code&gt;. Версия в сорцах жутко смердила. Для того, что бы поставить актуальную версию, нужно добавить в &lt;code&gt;/etc/apt/sources.list&lt;/code&gt; следующие строчки: &lt;pre&gt;&lt;code&gt;deb http://nginx.org/packages/debian/ squeeze nginx
deb-src http://nginx.org/packages/debian/ squeeze nginx&lt;/code&gt;&lt;/pre&gt; Так как я ставлю ngixn исключительно для проксирования запросов внутрь моей локальной сети, то ни &lt;code&gt;php-fpm&lt;/code&gt;, ни &lt;code&gt;mysql&lt;/code&gt; я не устанавливаю. Следовательно я удалил старую версию с помощью &lt;code&gt;aptitude remove --purge nginx&lt;/code&gt;, а дальше все просто: &lt;pre&gt;&lt;code&gt;sudo aptitude install nginx&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;h2 id='nginx_proxy_pass'&gt;nginx proxy pass&lt;/h2&gt;

&lt;p&gt;После того, как установка nginx на мой debian сервер успешно завершилась, нужно настроить проксирование запросов в мой маленький интранет. Для каждого субдомена нужно писать отдельный конфиг. Возможно в чем-то эти конфиги могут отличаться. У меня же они одинаковые. Конфигурация сервера помещается в директиву &lt;code&gt;http&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
  server_name router.anton-shuvalov.info; # субдомен
  listen 80;
  location / {
    proxy_pass http://192.168.1.1:81; # локальный адрес
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Я добавил такие конфиги для веб-интерфейса роутера и торрент-клиента.&lt;/p&gt;

&lt;h2 id='_webmin___cookies'&gt;В Webmin не работают cookies&lt;/h2&gt;

&lt;p&gt;С webmin не заладилось. После того, как я настроил проксирование по адресу &lt;code&gt;webmin.anton-shuvalov.info&lt;/code&gt; меня встретила форма логина, но, введя имя пользователя и пароль, я увидел такую ошибку:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error - No cookies
	
Your browser does not support cookies, which are required for this web server to work in session authentication mode&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Надо отметить, что &lt;code&gt;proxy_pass&lt;/code&gt; у меня вел на &lt;code&gt;https://192.168.1.101:10000&lt;/code&gt;. Но на самом деле, SSL webmin&amp;#8217;а нужно выключить. Для этого в файле &lt;code&gt;sudo rmate /etc/webmin/miniserv.conf&lt;/code&gt; нужно поменять &lt;code&gt;ssl=1&lt;/code&gt; на &lt;code&gt;ssl=0&lt;/code&gt;. Ну и ниже конфиг сервера в &lt;code&gt;/etc/nginx/nginx.conf&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
  server_name webmin.anton-shuvalov.info; 
  listen 80;
  location / {
    proxy_pass http://192.168.1.1:10000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;После этого все должно было заработать. Хотя нет. Webmin очень расстроился из-за подозрительного домена, с которого я до него добрался. Во всех своих фреймах он только об этом и говорил мне. Что бы порадовать старика нужно зайти в webmin через локальный адрес, у меня это &lt;code&gt;192.168.1.101:10000&lt;/code&gt; перейти в &lt;code&gt;Webmin &amp;gt; Настройка Webmin &amp;gt; Проверка ссылок&lt;/code&gt; и вписать, куда влезает, название своего домена. Что-то типа &lt;code&gt;webmin.anton-shuvalov.info&lt;/code&gt;. Теперь-то все.&lt;/p&gt;

&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/webmin.jpg' /&gt;&lt;/p&gt;

&lt;h2 id='id17'&gt;Реприза&lt;/h2&gt;

&lt;p&gt;Сейчас я очень доволен — я могу добраться до консоли роутера или сервера, который я спрятал в чулане, до интерфейса роутера, до торрент-клиента, до состояния сервера из любой точки мира. Это очень здорово. Позднее я планирую поднять доступ до ftp (хотя, это должно решится с помощью установки нужного optware пакета на роутер). Ну и попробую перенести свой блог на домашний сервер, что бы посмотреть, что из этого выйдет. А на сегодня, вроде как все.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Домашний сервер. Первые шаги</title>
   <link href="http://anton-shuvalov.info/2013/01/06/server_day1"/>
   <updated>2013-01-06T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2013/01/06/server_day1</id>
   <content type="html">&lt;h2 id='_debian'&gt;Установка Debian&lt;/h2&gt;

&lt;p&gt;Установка Debian не представляет из себя ничего сложного. На &lt;a href='http://www.debian.org/'&gt;официальном сайте&lt;/a&gt; я скачал дистрибутив для AMD64. Прожег диск, вставил его в привод сервера. Согласился с предложением BIOS загрузиться с CD. Когда инсталятор предложил мне выбрать пакеты для автоматической установки, я отметил только SSH-server.&lt;/p&gt;

&lt;p&gt;Здесь стоит сделать небольшую ремарку относительно размещения моего сервера. Системный блок стоит в тесной маленькой кладовке, и работать с ним напрямую, с помощью клавиатуры и мышки жутко неудобно. По этому практически все время я планирую работать с ним на моем MacBook посредством SSH.&lt;/p&gt;

&lt;p&gt;После перезагрузки я посмотрел IP с помощью &lt;code&gt;ifconfig&lt;/code&gt;. В своем MacBook я открыл конфиг SSH.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mate ~/.ssh/config&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;И дописал в него свой новый сервер.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Host ayanami
&amp;#35; My home server
HostName 192.168.1.101
RemoteForward 52698 127.0.0.1:52698
User rei
Port 22&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Строчка &lt;code&gt;RemoteForward&lt;/code&gt; нужна для проброса порта обратно, с сервера на MacBook. Это пригодится мне при настройке rmate. И так, подключаюсь к серверу, и вижу шелл.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh ayanami&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/ssh_login_rei.jpg' /&gt;&lt;/p&gt;

&lt;h2 id='rmate'&gt;rmate&lt;/h2&gt;

&lt;p&gt;поставил по своей же &lt;a href='/2012/06/15/TextMate2-mate-and-rmate/'&gt;инструкции&lt;/a&gt; которую я писал в блог.&lt;/p&gt;

&lt;h2 id='ruby'&gt;ruby&lt;/h2&gt;

&lt;p&gt;Ruby поставил из aptitude, нужен для того, что бы работал rmate.&lt;/p&gt;

&lt;h2 id='sudo'&gt;Sudo&lt;/h2&gt;

&lt;p&gt;Sudo пригодится для того, что бы не сидеть под суперпользователем, и не перелогиниваться каждый раз, когда нужны привилегии root&amp;#8217;а. Без проблем устанавливается через &lt;code&gt;apt-get&lt;/code&gt; или &lt;code&gt;aptitude&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rmate /etc/sudoers&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Под строкой &lt;code&gt;root ALL=(ALL) ALL&lt;/code&gt; нужно дописать&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;user&amp;gt; ALL=(ALL) ALL&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id='webmin'&gt;webmin&lt;/h2&gt;

&lt;p&gt;Webmin — это веб-панель для мониторинга сервера. Пишут, что можно даже в консоль не залазить, если эта штука стоит. Хотя заменять консоль веб-интерфейсом — это не для меня, но вот мониторинг системы — штука нужная.&lt;/p&gt;

&lt;p&gt;Для установки с помощью APT нужно отредактировать файл &lt;code&gt;/etc/apt/sources.list&lt;/code&gt; и дописать туда &lt;pre&gt;&lt;code&gt;deb http://download.webmin.com/download/repository sarge contrib
deb http://webmin.mirror.somersettechsolutions.co.uk/repository sarge contrib&lt;/code&gt;&lt;/pre&gt; Потом нужно добавить ключ к репозиторию. &lt;pre&gt;&lt;code&gt;cd /tmp
wget http://www.webmin.com/jcameron-key.asc
apt-key add jcameron-key.asc&lt;/code&gt;&lt;/pre&gt; Ну и теперь можно устанавливать &lt;pre&gt;&lt;code&gt;apt-get update
apt-get install webmin&lt;/code&gt;&lt;/pre&gt; Все зависимости разрешаются автоматически. После набираю в браузере &lt;code&gt;http://server-ip:10000&lt;/code&gt; и видим веб-интерфейс webmin.&lt;/p&gt;

&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/webmin.jpg' /&gt;&lt;/p&gt;

&lt;h2 id='zsh'&gt;zsh&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;sudo apt-get install zsh&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;После этого под каждым пользователем, который должен использовать zsh нужно сменить шелл: &lt;pre&gt;&lt;code&gt;chsh&lt;/code&gt;&lt;/pre&gt; В появившемся диалоге нужно вписать &lt;pre&gt;&lt;code&gt;/bin/zsh&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Я пока что поставил первый попавшийся &lt;a href='http://blackdiv.livejournal.com/39996.html'&gt;конфиг&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;. /etc/zsh_command_not_found #подключаем стандартный вывод убунты 
autoload -U compinit # настраиваем автодополнение
compinit 
HISTFILE=~/.zhistory # устанавливаем файл истории для zsh
HISTSIZE=10000 # размер истории
SAVEHIST=10000 
setopt  APPEND_HISTORY # убираем повторы и пустые строки в истории
setopt  HIST_IGNORE_ALL_DUPS 
setopt  HIST_IGNORE_SPACE 
setopt  HIST_REDUCE_BLANKS 
setopt autocd # смену пути без команды cd
setopt CORRECT_ALL # корректировку ошибок
export PS1 NLSPATH PAGER MAIL LS_COLORS LS_OPTIONS LIBRARY_PATH \
            C_INCLUDE_PATH CPLUS_INCLUDE_PATH EDITOR TERM XFILESEARCHPATH # экспортируем всякие полезности
bindkey -e # устанавливаем клавиши как в e-macs
fc -R $HISTFILE # подгружаем старую историю
# если мы находимся под обычным пользователем то в приветствии, в конце будет - &amp;gt;  если под рутом то - #
if [[ $EUID == 0 ]]; then
PS1=$'%{\e[1;7m%}%n@%m:%~ #%{\e[1;0m%} ';
else
PS1=$'%{\e[1;7m%}%n@%m:%~ &gt;%{\e[1;0m%} ';
fi
PROMPT=$PS1;
#и справа в качечтве приветствия выведем время.
RPROMPT=$'%{\e[1;34m%}%T%{\e[0m%}' 
#добавляем стандартные алиасы
alias ls='ls -F --color=auto'
alias ll='ls -l'
alias la='ls -A'
alias li='ls -ial'
alias lsd='ls -ld *(-/DN)'
#указываем пути к манам
manpath=&quot;/usr/man:/usr/share/man:\
/usr/local/man:/usr/X11R6/man:/opt/qt/doc&quot;
export MANPATH

&lt;/code&gt;&lt;/pre&gt;</content>
 </entry>
 
 <entry>
   <title>Домашний сервер. Интро</title>
   <link href="http://anton-shuvalov.info/2013/01/05/homeserver_intro"/>
   <updated>2013-01-05T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2013/01/05/homeserver_intro</id>
   <content type="html">&lt;p&gt;&amp;#32;&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/Debian_logo.png' /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;В планах зреет переход на &lt;a href='http://aws.amazon.com/s3/pricing/'&gt;AWS Free Usage Tier&lt;/a&gt;. Сейчас мои сайты хостятся на &lt;a href='http://selectel.ru/'&gt;selectel.ru&lt;/a&gt; и эксперементирую я там же.&lt;br /&gt;После &lt;a href='/2012/12/31/wp2jekyll'&gt;перехода на Jekyll&lt;/a&gt; необходимость в таком облачном сервере отпала. Точнее, необходимость разложилась на хостинг для статичных сайтов, плюс сервер для эксперементов. Первую необходимость как раз решает &lt;a href='http://aws.amazon.com/s3/pricing/'&gt;AWS Free Usage Tier&lt;/a&gt;, а для второй я решил использовать старый PC, который уже пару месяцев пылился в углу. А точнее:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPU&lt;/strong&gt;: AMD Phenom II X2 555 BE ( 2 cores 3.2GHz )&lt;/li&gt;

&lt;li&gt;&lt;strong&gt;RAM&lt;/strong&gt;: 4GB ( 2GB x 2GB )&lt;/li&gt;

&lt;li&gt;&lt;strong&gt;HDD&lt;/strong&gt;: 500GB&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id='___'&gt;Для чего все это?&lt;/h2&gt;

&lt;p&gt;Итак, для чего мне понадобился домашний сервер? В первую очередь я хочу проверить достаточно ли оправданно хостить дома статичные сайты и небольшие веб-сервисы. Во-вторых, я люблю экспериментировать с технологиями — мне хочется поближе разобраться с ruby, nodejs. В-третьих, мне интересен опыт работы с linux.&lt;/p&gt;

&lt;p&gt;В блоге я постараюсь вести заметки о том, как я сделал домашний сервер. Описывать что, зачем и как делаю. Заметки можно просмотреть по тегу &lt;a href='/tags.html#homeserver-ref'&gt;homeserver&lt;/a&gt;&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Переезд с WordPress на Jekyll</title>
   <link href="http://anton-shuvalov.info/2012/12/31/wp2jekyll"/>
   <updated>2012-12-31T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/12/31/wp2jekyll</id>
   <content type="html">&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/jekyll.png' /&gt; &lt;br /&gt; &lt;br /&gt; Когда я завел блог я был уверен, что wordpress — это простая и легкая в освоении CMS. В целом так и есть. Да и большинство хостингов позволяют установить эту CMS в один клик. Первоначально я использовал как-раз такой хостинг на &lt;a href='http://domain.com'&gt;domain.com&lt;/a&gt;. Позднее я перенес свой блог на облачный сервер &lt;a href='http://selectel.ru'&gt;selectel.ru&lt;/a&gt;, где я без особого труда самостоятельно установил WordPress. Так же в плюс этой CMS Я знаю 3 способа создать сайт на WordPress бесплатно.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Можно сделать это официально на &lt;a href='http://wordpress.com'&gt;wordpress.com&lt;/a&gt;, но там есть ряд ограничений (например, нельзя устанавливать свои темы и плагины)&lt;/li&gt;

&lt;li&gt;Можно использовать &lt;a href='https://openshift.redhat.com/'&gt;OpenShift&lt;/a&gt; от RedHat, где в один клик можно создать сайт на WordPress без ограничений. По характеристикам сервера — этот вариант самый производительный&lt;/li&gt;

&lt;li&gt;Воспользоваться популярным хостингом для веб-приложений &lt;a href='http://www.heroku.com/'&gt;heroku&lt;/a&gt;, для которого есть свой &lt;a href='https://github.com/mhoofman/wordpress-heroku'&gt;форк wordpress&lt;/a&gt; с postgreSQL.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;У каждого из этих способов есть свои недостатки. По этому я продолжал использовать сервер у selectel, который давал мне еще и широкое поле для экспериментов.&lt;/p&gt;

&lt;p&gt;Достаточно быстро мной овладела мысль об избыточности WordPress для блога — большая БД, куча запросов, плагинов, кода. Мой блог работал не особенно быстро. По крайней мере не так быстро, как я бы хотел. Я периодически натыкался на различные интересные решения, например на &lt;a href='https://github.com/fletcher/MultiMarkdown-CMS'&gt;markdown-cms&lt;/a&gt;. В принципе, это такой же генератор статичных сайтов, как и Jekyll только менее удобный и на Perl. В то время подход основанный на генерации статичных страниц я не оценил. О Jekyll я слышал достаточно давно в контексте GitHub Pages. Как-то раз и я решил попробовать сделать свой сайт на github с помощью jekyll. Внезапно jekyll оказался очень простым и понятным. До работы с ним у меня не было опыта в ruby. Теперь же у меня есть большое желание углубиться в этот язык. Особенно мне понравился rakefile. Я много времени провел пытаясь понять как пользоваться makefile, но rakefile я освоил за 5 минут, и практически сразу начал использовать его в своих проектах. Для Jekyll в будущих проектах доже найдется место.&lt;/p&gt;

&lt;p&gt;Вернемся к переезду. Сеттинг:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;source: it-prm.com, хостится на selectel под nginx, php, wordpress&lt;/li&gt;

&lt;li&gt;tagget: anton-shuvalov.info, plain-html, jekyll-bootstrap, хостится на selectel Свои статьи я храню в markdown, по этому их перенос на Jekyll занял минут 20. Написал rakefile с двумя тасками:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# Default task
task :default =&gt; :run

# Push 
desc 'Push site to server'
task :push do
  print &quot;Push _site to server..\n&quot;
  sh &quot;rsync -az --delete _site/ eva:/home/web/www/anton-shuvalov.info&quot;
  print &quot;Done...\n&quot;
end

# Run
desc 'Run server'
task :run do
  print &quot;Starting jekyll...\n&quot;
  sh &quot;jekyll --server&quot;
end
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;В задаче &lt;code&gt;push&lt;/code&gt; &lt;code&gt;eva&lt;/code&gt; — это имя сервера, оно забито в конфиге ssh &lt;code&gt;~/.ssh/config&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Host eva
HostName 88.88.88.88 # ip сервера
User shuvalov
Port 22
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Для деплоя на сервер я набрал в консоли &lt;code&gt;rake push&lt;/code&gt; и через секунд 10 сайт открылся по адресу anton-shuvalov.info. Осталось настроить 301 редирект с it-prm.com на anton-shuvalov.info. В конфиге сайта в &lt;code&gt;/etc/nginx/sites-available/it-prm.com&lt;/code&gt; это выглядит так:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
  ...

  # Redirects to anton-shuvalov.info
  if ( $request_uri ~* &quot;/?p=803&quot; ) { 
    rewrite ^ http://anton-shuvalov.info/2012/12/05/backbone-screencasts/? permanent; 
  }
  if ( $request_uri ~* &quot;/?p=772&quot; ) { 
    rewrite ^ http://anton-shuvalov.info/2012/11/18/Textmate2-line-hate/? permanent; 
  }
  if ( $request_uri ~* &quot;/?p=753&quot; ) { 
    rewrite ^ http://anton-shuvalov.info/2012/11/09/.google-analitycs-avtime? permanent; 
  }

  ...

  rewrite ^ http://anton-shuvalov.info? permanent;
  
  ...
		
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ну вот и все. Перезагрузил nginx &lt;code&gt;sudo nginx -s reload&lt;/code&gt;, все заработало. Проверил редиректы руками — все правильно. Переезд закончен.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Jekyll REXML could not parse this XML/HTML</title>
   <link href="http://anton-shuvalov.info/2012/12/21/jekyll-iframe-bug"/>
   <updated>2012-12-21T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/12/21/jekyll-iframe-bug</id>
   <content type="html">&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/jekyll.png' /&gt; &lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;В Jekyll я столкнулся с проблемой. Вставил в текст поста iframe: &lt;pre&gt;&lt;code&gt;&amp;lt;iframe width=&quot;620px&quot; height=&quot;400px&quot; src=&quot;http://player.vimeo.com/video/55084406&quot; frameborder=&quot;0&quot; mozallowfullscreen allowFullScreen&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;И получил вот такую такую ошибку:&lt;/p&gt;
&lt;pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'&gt;REXML could not parse this XML/HTML: 
&amp;lt;iframe width=&quot;620px&quot; height=&quot;400px&quot; src=&quot;http://player.vimeo.com/video/123&quot; frameborder=&quot;0&quot; allowFullScreen&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/pre&gt;
&lt;p&gt;Что бы избавиться от этой ошибки придется отказаться от использования &lt;code&gt;mozallowfullscreen&lt;/code&gt;, &lt;code&gt;allowFullScreen&lt;/code&gt;. В результате код должен выглядеть так:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;iframe width=&quot;620px&quot; height=&quot;400px&quot; src=&quot;http://player.vimeo.com/video/55084406&quot; frameborder=&quot;0&quot;&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id='__vimeo__jekyll'&gt;Плагин для vimeo в jekyll&lt;/h2&gt;

&lt;p&gt;Для того, что бы упростить себе жизнь я использую &lt;a href='https://gist.github.com/4414183'&gt;плагин для видео из vimeo&lt;/a&gt; — этот плагин учитывает проблему с парсингом HTML и содержит стили для того, что бы видео корректно меняло свой размер для мобильных устройств. Работает плагин просто — достаточно вставить в тело записи &lt;code&gt;{ % vimeo 55084406 % }&lt;/code&gt; подставив нужный id.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>backbone screencasts</title>
   <link href="http://anton-shuvalov.info/2012/12/05/backbone-screencasts"/>
   <updated>2012-12-05T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/12/05/backbone-screencasts</id>
   <content type="html">&lt;p&gt;Начал смотреть видео о том, как использовать backbone.js. Скринкаст на русском языке от украинского разработчика &lt;a href='https://www.facebook.com/okhomenko'&gt;Александра Хоменко&lt;/a&gt;. &lt;br /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;h2 id='_backbone'&gt;Основы Backbone&lt;/h2&gt;
&lt;div class='video-container'&gt;&lt;iframe class='vimeo-iframe' src='http://player.vimeo.com/video/44066608 ' frameborder='0'&gt;   &lt;/iframe&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href='http://vimeo.com/44066608'&gt;Backbone Basics (russian)&lt;/a&gt; from &lt;a href='http://vimeo.com/okhomenko'&gt;Oleksandr Khomenko&lt;/a&gt; on &lt;a href='http://vimeo.com'&gt;Vimeo&lt;/a&gt;. &lt;br /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;h2 id='backbone_routers'&gt;Backbone Routers&lt;/h2&gt;
&lt;div class='video-container'&gt;&lt;iframe class='vimeo-iframe' src='http://player.vimeo.com/video/45460580 ' frameborder='0'&gt;   &lt;/iframe&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href='http://vimeo.com/45460580'&gt;Backbone Routers (Russian, Русский)&lt;/a&gt; from &lt;a href='http://vimeo.com/okhomenko'&gt;Oleksandr Khomenko&lt;/a&gt; on &lt;a href='http://vimeo.com'&gt;Vimeo&lt;/a&gt;. &lt;br /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;h2 id='_backbone___amd___requirejs'&gt;Организация Backbone приложения в AMD-модули с помощью RequireJS&lt;/h2&gt;
&lt;div class='video-container'&gt;&lt;iframe class='vimeo-iframe' src='http://player.vimeo.com/video/44236020 ' frameborder='0'&gt;   &lt;/iframe&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href='http://vimeo.com/44236020'&gt;Организация Backbone приложения в AMD-модули с помощью RequireJS&lt;/a&gt; from &lt;a href='http://vimeo.com/okhomenko'&gt;Oleksandr Khomenko&lt;/a&gt; on &lt;a href='http://vimeo.com'&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Интерлиньяж в TextMate2</title>
   <link href="http://anton-shuvalov.info/2012/11/18/Textmate2-line-hate"/>
   <updated>2012-11-18T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/11/18/Textmate2-line-hate</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/textmate2LH.jpg' /&gt;
&lt;p&gt;Долгое время не мог понять что не так со шрифтами в TextMate2. Сейчас определился — мне не нравится line-height в редакторе. Изменить высоту строк достаточно просто. Для этого в терминал я ввел следующие комманды:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.macromates.TextMate.preview fontAscentDelta -float 0
defaults write com.macromates.TextMate.preview fontLeadingDelta -float 0&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;По-умолчанию параметры используются со значением &lt;code&gt;1&lt;/code&gt;, так что вернуть все как было можно, набрав:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.macromates.TextMate.preview fontAscentDelta -float 1
defaults write com.macromates.TextMate.preview fontLeadingDelta -float 1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href='https://github.com/textmate/textmate/issues/373'&gt;Источник&lt;/a&gt;&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Как правильно считать время в Google Analytics</title>
   <link href="http://anton-shuvalov.info/2012/11/09/.google-analitycs-avtime"/>
   <updated>2012-11-09T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/11/09/.google-analitycs-avtime</id>
   <content type="html">&lt;img class='img-center' alt='' src='https://lh6.googleusercontent.com/-NtT5gMJiTr0/AAAAAAAAAAI/AAAAAAAAAVY/wkOpD1cWdyk/photo.jpg' /&gt;
&lt;p&gt;Очень часто в Google Analytics среднее время проведенное пользователем на сайте равно нулю. Это, по меньшей мере, странно — неужели пользователь перешел по ссылке и тут же ее закрыл?&lt;/p&gt;

&lt;h2 id='id15'&gt;Решение&lt;/h2&gt;

&lt;p&gt;Все дело в том, что Google считает время между открытием страниц, соответственно пользователь, который просмотрел только одну страницу по подсчетам гугла проводит на ней 0 секунд. Для того, что бы считать время, проведенное пользователем на странице, правильно — можно периодически отправлять в Google Analytics сообщения. Самый простой способ — сделать это в цикле:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;var trackingByInterval = (function trackingByInterval () {
	var timerCallback = function timerCallback () {
		_gaq.push(['_trackEvent', 'Reading', 'every 5 sec']);
	}
	setInterval(timerCallback, 5000);
})();&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ссылка на &lt;a href='https://gist.github.com/4044055'&gt;gist&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Этот код нужно добавить после скрипта Google Anaytics. Скрипт запускается при открытии страницы, и фиксирует время, проведенное пользователем на сайте с частотой дискретизации — 5 секунд.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>pgadmin column "datconfig" does not exist</title>
   <link href="http://anton-shuvalov.info/2012/11/06/Postgres.app-and-pgadmin"/>
   <updated>2012-11-06T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/11/06/Postgres.app-and-pgadmin</id>
   <content type="html">&lt;p&gt;Пару дней назад установил &lt;a href='http://postgresapp.com'&gt;Postgres.app&lt;/a&gt; и &lt;a href='http://www.pgadmin.org'&gt;pgadmin v1.8.4&lt;/a&gt;. Но при попытке подключения из pgadmin к БД получал ошибку&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ERROR: Column &quot;datconfig&quot; does not exist&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id='id14'&gt;Решение&lt;/h2&gt;

&lt;p&gt;Проблема возникает из-за странной сортировки на сайте &lt;a href='http://www.postgresql.org/ftp/pgadmin3/release/'&gt;pgadmin&lt;/a&gt; и невнимательности %username%. pgadmin v1.8.4 кажется последней версией, но на самом деле в списке есть версии v1.10.* и старше. Для того, что бы избавиться от ошибки нужно использовать версию pgadmin v1.12.* или &lt;a href='http://www.postgresql.org/ftp/pgadmin3/release/v1.16.0/'&gt;старше&lt;/a&gt;.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Как писался PostgreSQL</title>
   <link href="http://anton-shuvalov.info/2012/10/19/kak-pisalsya-postgresql"/>
   <updated>2012-10-19T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/19/kak-pisalsya-postgresql</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/postgresql.png' /&gt;
&lt;p&gt;Разработка СУБД POSTRGES началась в 1986 году под руководством профессора Майкла Стоунбрейкера (Michael Stonebraker). Концепции системы и архитектурные решения представлены в &lt;a href='http://db.cs.berkeley.edu/papers/ERL-M85-95.pdf'&gt;THE DESIGN OF POSTGRES&lt;/a&gt;, &lt;a href='http://db.cs.berkeley.edu/papers/ERL-M87-13.pdf'&gt;The POSTGRES data model&lt;/a&gt;, &lt;a href='http://postgresql.ru.net/manual/biblio.html#STON87A'&gt;The design of the POSTGRES rules system&lt;/a&gt;, &lt;a href='http://db.cs.berkeley.edu/papers/ERL-M87-06.pdf'&gt;The design of the POSTGRES storage system&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id='id10'&gt;Прототипы&lt;/h2&gt;

&lt;p&gt;В первых версиях POSTGRES было большое количество архитектурных решений. Только после Версии 3 разработчики сконцентрировали свое внимание на переносимости и стабильности СУБД.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Первый прототип заработал в 1987 и был продемонстрирован на Конференции ACM-SIGMOD в 1988 году.&lt;/li&gt;

&lt;li&gt;Второй прототип (Версия 1), описанный в &lt;a href='http://db.cs.berkeley.edu/papers/ERL-M90-34.pdf'&gt;The implementation of POSTGRES&lt;/a&gt; был выпущен в июне 1989 года.&lt;/li&gt;

&lt;li&gt;Третий прототип (Версия 2), выпущен в Июне 1990 года.&lt;/li&gt;

&lt;li&gt;Четвертый прототип (Версия 3) выпущен в 1991.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id='id11'&gt;Поддержка&lt;/h2&gt;

&lt;p&gt;В 1993 году стало очевидно, что обслуживание прототипа кода и его поддержка занимают гораздо больше времени, чем сами исследования в области баз данных. Пытаясь снизить нагрузку, связанную с поддержкой, проект Беркли POSTGRES официально прекратил своё существование с выходом версии 4.2.&lt;/p&gt;

&lt;h2 id='id12'&gt;Переписывание&lt;/h2&gt;

&lt;p&gt;В 1994, Эндрю Ю (Andrew Yu) и Джолли Чен (Jolly Chen) добавили в POSTGRES интерпретатор языка SQL. СУБД была полностью приведена к стандарту ANSI C и сократив свой размер на 25%. Были внесены многие внутренние изменения, которые увеличили производительность и обслуживаемость кода. Postgres95 был быстрее на 30-50% согласно Wisconsin Benchmark по сравнению с POSTGRES, Version 4.2. При разработке Postgres95 акцент ставился на обнаружение и понимание существующих проблем в коде сервера.&lt;/p&gt;

&lt;h2 id='postgresql'&gt;PostgreSQL&lt;/h2&gt;

&lt;p&gt;В 1996 году было решено, что имя &amp;#8220;Postgres95&amp;#8221; не соответствует настоящему времени. Для проекта было выбрано название PostgreSQL. Если при разработке Postgres95 внимание разработчиков было сконцентирировано на обнаружении и понимании существующих проблем в коде сервера, то в PostgreSQL внимание сместилось на расширение возможностей и совместимости при продолжении работы во всех других областях.&lt;/p&gt;

&lt;h2 id='id13'&gt;Вывод&lt;/h2&gt;

&lt;p&gt;PostgreSQL — это весьма объемный проект. Путь между прототипом, и версией, имеющей четкую концепцию и всесторонне продуманные архитектурные решения у ребят из Беркли занял 10 лет.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Кэш и ненависть в iBooks</title>
   <link href="http://anton-shuvalov.info/2012/10/11/cache-and-hate-ibooks"/>
   <updated>2012-10-11T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/11/cache-and-hate-ibooks</id>
   <content type="html">&lt;img class='img-center' alt='iBooks Author' src='http://31808.selcdn.ru/it-prm/pics/hero_ibooks_author.png' /&gt;
&lt;p&gt;Разрабатывая книгу в iBooks Author, я столкнулись с «необъяснимыми» проблемами с HTML5 AUDIO в написанных мной виджетах. Аудио то играло, то не играло, звук иногда пропадал после исправлений, которые не затрагивали ни JS, ни HTML, ни CSS ( например после замены дефисов на тире ). Долгим и, к сожалению, эмпирическим путем я установил корень проблемы — кириллица в имени файла книги и в имени файла виджета. Вроде бы все легко — переименовываем книгу, переименовываем виджет, профит! С файлом книги, естественно, проблем не возникло, а с виджетом все оказалось чуть-чуть сложнее.&lt;/p&gt;

&lt;h3 id='wtf_cache'&gt;WTF?! Cache!&lt;/h3&gt;

&lt;p&gt;Никто не может просто взять и переименовать виджет. iBooks Author имеет свой механизм кэширования. Упрощенная модель кэша работает примерно так&lt;/p&gt;
&lt;ol&gt; 
&lt;li&gt;&lt;b&gt;Получаем хэш файла&lt;/b&gt;, который пользователь пытается добавить в книгу.&lt;/li&gt;
&lt;li&gt;&lt;b&gt;Сверяем хэш файла с хэшами уже существующих файлов&lt;/b&gt; этого типа. &lt;/li&gt;
&lt;li&gt;&lt;b&gt;Решаем, использовать ли новый файл, либо сослаться на файл, который уже существует в книге&lt;/b&gt; основываясь на результате предыдущего пункта.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Можно очень долго пытаться добавить переименованый латиницей файл в книгу, но &lt;strong&gt;пока в код виджета не добавишь хотя бы один пробел — iBooks&lt;/strong&gt; не станет добавлять виджет, и вместо этого &lt;strong&gt;будет ссылаться на уже существующий файл, который не будет работать из-за кириллицы в названии.&lt;/strong&gt;&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Как объеденить две медиатеки в iTunes</title>
   <link href="http://anton-shuvalov.info/2012/10/09/itunes-merge-libraries"/>
   <updated>2012-10-09T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/09/itunes-merge-libraries</id>
   <content type="html">&lt;img class='img-center' alt='Как объединить две медиатеки iTunes' src='http://31808.selcdn.ru/it-prm/pics/itunes.jpg' /&gt;
&lt;p&gt;Наконец я получил &lt;a href='http://www.mcetech.com/optibay/'&gt;optibay&lt;/a&gt;, и установил к SSD в своем MacBook Pro еще и HDD. 120Gb памяти в SSD уже не сдерживали меня, и я решил вернуть свою музыкальную коллекцию с внешнего диска обратно на MacBook. Большая и старая медиатека лежала на внешнем диске, а на SSD скопилась совсем небольшая медиатека, в которой я уже успел проставить рейтинги, да и статистику прослушиваний терять не хотелось.&lt;/p&gt;

&lt;h4 id='lets_merge'&gt;Lets merge&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;Запускаю iTunes с той медиатекой, которую я хочу экспортировать. Для этого нужно запустить iTunes зажав &lt;code&gt;option&lt;/code&gt;, в появившемся окне выбрать &lt;code&gt;Choose Library..&lt;/code&gt; и указать папку с медиатекой.&lt;/li&gt;

&lt;li&gt;Экспорт медиатеки.&lt;code&gt;File &amp;gt; Library &amp;gt;  Export&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;Запускаем iTunes с той медиатекой, в которую мы хотим импортировать первую. Как в первом пункте.&lt;/li&gt;

&lt;li&gt;Импортируем медиатеку. &lt;code&gt;File &amp;gt; Library &amp;gt; Import Playlist&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 
 <entry>
   <title>BASH. Чем отличается which от whereis</title>
   <link href="http://anton-shuvalov.info/2012/10/05/bash-whereis-which"/>
   <updated>2012-10-05T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/05/bash-whereis-which</id>
   <content type="html">&lt;img class='img-center' alt='Чем отличается which от whereis' src='http://31808.selcdn.ru/it-prm/pics/bash.png' /&gt;
&lt;p&gt;В bash есть две утилиты для определения пути к программе, и я решил выяснить подробности использования обеих утилит. Как оказалось — не зря.&lt;/p&gt;

&lt;h2 id='which'&gt;Which&lt;/h2&gt;
&lt;p&gt;Команда &lt;code&gt;which&lt;/code&gt; ищет приложение в пользовательской директории. Например: &lt;br /&gt;
&lt;pre&gt;&lt;code&gt;which git
/usr/local/bin/git&lt;/code&gt;&lt;/pre&gt;
&lt;/p&gt;
&lt;h4 id='id9'&gt;Ключи&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-a&lt;/code&gt; — возвращает список путей ко всем найденным программам.&lt;/li&gt;

&lt;li&gt;&lt;code&gt;-s&lt;/code&gt; — возвращает &lt;code&gt;0&lt;/code&gt; если хотя бы одна программа есть, и &lt;code&gt;1&lt;/code&gt; если ничего нет.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id='whereis'&gt;Whereis&lt;/h2&gt;

&lt;p&gt;Команда whereis ищет программы среди стандартных директорий и флагов не имеет. Пример:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;whereis git
/usr/bin/git&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Архитектура кода</title>
   <link href="http://anton-shuvalov.info/2012/10/05/Architecture-of-Source"/>
   <updated>2012-10-05T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/05/Architecture-of-Source</id>
   <content type="html">&lt;img class='img-center' alt='Архитектура кода' src='http://31808.selcdn.ru/it-prm/pics/blueprint-1.jpg' /&gt;
&lt;p&gt;Сегодня на работе стал свидетелем жаркой дискуссии между менеджером и разработчиками. Суть спора заключалась в том, что программисты решили что необходима определенная фишка, и ее обязательно нужно заложить в архитектуру, а еще лучше — сделать. Менеджеру эта фишка казалась чуть более, чем полностью не нужной. Кричали, матерились, но разработчики стояли на своем — нужно заложить фичу в архитектуру. Допустим, правы все — фича логичная, но, сейчас не нужная. Менеджер предложил сделать проект без фичи, а в следующей интерации над ней подумать, программисты сказали, что так нельзя, нужно делать сейчас — что бы потом все не переписывать заново.&lt;/p&gt;

&lt;p&gt;Из этого спора я сделал вывод — или я не понимаю, что такое архитектура и проектирование, или разработчики. По-моему &lt;strong&gt;в архитектуру закладываются не фичи, а возможность их реализации.&lt;/strong&gt; При чем, не конкретной фичи, или модуля, а определенного типа модулей и фич. Конечно это увеличивает время на разработку, но под проектированием я подразумеваю именно создание модели такой системы, для внесения существенных изменений в которую не придется переделывать все заново. А если одну &amp;#8220;фичу в архитектуру заложить&amp;#8221;, то где гарантия, что при чуть изменившихся требованиях к фиче не придется свое детище учить ходить на костылях?&lt;/p&gt;

&lt;p&gt;WTF?! Кто прав?&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Иерархия методов в классе</title>
   <link href="http://anton-shuvalov.info/2012/10/04/Hierarchy-of-Methods"/>
   <updated>2012-10-04T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/10/04/Hierarchy-of-Methods</id>
   <content type="html">&lt;img class='img-center' alt='Иерархия методов в классе' src='http://31808.selcdn.ru/it-prm/pics/code.jpg' /&gt;
&lt;p&gt;Моя старая проблема — расположение методов класса. Тут можно следовать различной логике. Сортировать, например, по алфавиту, по порядку написания, писать сначала публичные, потом приватные методы и тд. В результате, в моих классах все равно какая-то путаница, которая со временем запутывается все больше и больше.&lt;/p&gt;

&lt;p&gt;Я решил строить иерархию методов класса основываясь на управлении — сверху методы которые используются для взаимодействия с классом, ниже методы, которые реализуют логику класса, после этого у меня остаются участки кода, которые свелись в методы для того, что бы не нарушать принципов DRY. К ним не требуется особого внимания, я так и оставляю их — в порядке написания.&lt;/p&gt;

&lt;p&gt;Возможно, просто так бросать сведенные в прайват методы куски кода как-то грязновато. Позднее такие методы можно вынести во вспомогательные классы, чтобы соблюдать принципы DRY не только на уровне конкретного класса, но и на уровне всего проекта. Вероятно, так можно свести все эти вспомогательные методы к еще более универсальным концентрациям пользы, вот только нужно ли это делать — для меня вопрос. По-моему, это дрочерство.&lt;/p&gt;

&lt;p&gt;P.S.: Еще я пристрастился перед написанием класса описывать его интерфейс с помощью:&lt;/p&gt;
&lt;pre&gt;&lt;code class='no-highlight'&gt;interface name {
	public static function name#1( $args );
	public static function name#2( $args );
}&lt;/code&gt;&lt;/pre&gt;</content>
 </entry>
 
 <entry>
   <title>TextMate2 стал бесплатным и опенсорсным</title>
   <link href="http://anton-shuvalov.info/2012/08/11/Textmate2-OpenSorce"/>
   <updated>2012-08-11T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/08/11/Textmate2-OpenSorce</id>
   <content type="html">&lt;a href='http://31808.selcdn.ru/it-prm/articles/20120811_textmate_9269/textmate_9269.jpg' style='display:block;text-align:center;'&gt;&lt;img title='Открыть в полном размере' src='http://31808.selcdn.ru/it-prm/articles/20120811_textmate_9269/textmate_9269.jpg' width='540px' /&gt;&lt;/a&gt;
&lt;p&gt;В списке изменений к версии 9269 сообщается о том, что исходный код textmate2 теперь &lt;a href='https://github.com/textmate/textmate'&gt;можно скачать на GitHub&lt;/a&gt;. По-моему мнению, Allan Odgaard открыл исходный код для того, что бы хоть как-то ускорить выход TextMate2, который уже более 6 лет находится в разработке.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Ссылка на глоссарий в iBooks Author</title>
   <link href="http://anton-shuvalov.info/2012/07/23/iBooks-Author-Glossary-and-Placeholders"/>
   <updated>2012-07-23T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/07/23/iBooks-Author-Glossary-and-Placeholders</id>
   <content type="html">&lt;p&gt;Столкнулся с проблемой — iBooks Author не создавал ссылки на глоссарий. Проблема была в тексте. По какой-то причине он оказался &amp;#8220;заполнителем&amp;#8221;.&lt;/p&gt;
&lt;a href='http://31808.selcdn.ru/it-prm/pics/ibooks_placeholder.jpg'&gt;
	&lt;img src='http://31808.selcdn.ru/it-prm/pics/ibooks_placeholder.jpg' width='100%' /&gt;
&lt;/a&gt;</content>
 </entry>
 
 <entry>
   <title>Отзыв о книге «Программист-прагматик»</title>
   <link href="http://anton-shuvalov.info/2012/07/21/The-Pragmatic-Programmer"/>
   <updated>2012-07-21T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/07/21/The-Pragmatic-Programmer</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/tpp.jpg' width='275px' /&gt;
&lt;p&gt;Наконец-то я дочитал &lt;a href='http://pragprog.com/book/tpp/the-pragmatic-programmer'&gt;эту книгу&lt;/a&gt; и решил написать набольшой отзыв. Я честно признаюсь, что эта открыла мне глаза на разработку программ. Как выражаются сами авторы, они &amp;#8220;отвечают на огромное количество вопросов с высоты птичьего полета&amp;#8221;. Но эту книгу нельзя назвать поверхностной. Книга написана достаточно детально, что бы направить развитие программиста в нужную сторону. В книге были и непонятные мне главы - в основном, это касалось юнит-тестов.&lt;/p&gt;

&lt;p&gt;Я обязательно перечитаю эту книгу, потому что она великолепна.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Нумерация страниц в iBooks Author</title>
   <link href="http://anton-shuvalov.info/2012/07/19/iBooks-Page-numbering"/>
   <updated>2012-07-19T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/07/19/iBooks-Page-numbering</id>
   <content type="html">&lt;p&gt;&lt;img alt='pic' src='http://31808.selcdn.ru/it-prm/articles/19082012%20%D0%BD%D1%83%D0%BC%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F%20%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%20%D0%B2%20ibooks%20author/pages_numbering.jpg' /&gt;&lt;/p&gt;

&lt;p&gt;В книгах используется нумерация страниц арабскими числами. Но в некоторых шаблонах (например в &amp;#8220;Preface&amp;#8221;) iBooks author используется римская нумерация. Исправить это очень просто. Выбрав неугодный layout параграфа, в &lt;code&gt;inspector &amp;gt; layout &amp;gt; numbering&lt;/code&gt; высталвяем правильную нумерацию.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Penguin — презентации в iBooks Author без ухудшения качества</title>
   <link href="http://anton-shuvalov.info/2012/07/14/iBooks-Widgets-Engines-Penguin"/>
   <updated>2012-07-14T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/07/14/iBooks-Widgets-Engines-Penguin</id>
   <content type="html">&lt;p&gt;&lt;img alt='pic' src='http://31808.selcdn.ru/it-prm/pics/pingvini.jpg' /&gt;&lt;/p&gt;

&lt;p&gt;Опубликовал на GitHub свои фреймворк для презентаций — &lt;a href='https://github.com/shuvalov-anton/Penguin'&gt;Penguin&lt;/a&gt;. Penguin предназначен, для презентаций, целиком состоящих из картинок.&lt;/p&gt;

&lt;p&gt;А началось все с того, что iBooks очень сильно пережимал картинки в KeyNote-презентациях. Для решения этой проблемы я за один вечер написал этот небольшое приложение. Приложению далеко до идеального кода и логики, но свою задачу оно отлично решает.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Что почитать</title>
   <link href="http://anton-shuvalov.info/2012/06/30/to-read"/>
   <updated>2012-06-30T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/06/30/to-read</id>
   <content type="html">&lt;img class='img-center' style='margin-bottom:3em;' src='http://31808.selcdn.ru/it-prm/pics/moleskine.png' width='275' /&gt;
&lt;p&gt;Я решил составить список интересных ссылок, которые стоит почитать на выходных. Основные темы - Textmate, JavaScript, CSS, ну и чуть-чуть о философии дизайна.&lt;/p&gt;

&lt;h2 id='frontend'&gt;FrontEnd:&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a title='JavaScript Гарден' href='http://bonsaiden.github.com/JavaScript-Garden/ru/'&gt;JavaScript Гарден&lt;/a&gt; - &lt;a href='http://shamansir.madfire.net/'&gt;shaman.sir&lt;/a&gt;, &lt;a href='http://anton.shevchuk.name/'&gt;Антон Шевчук&lt;/a&gt;, &lt;a href='http://nixsolutions.com/'&gt;Максим Лозовой&lt;/a&gt;, &lt;a href='http://nixsolutions.com/'&gt;Елена Пашкова&lt;/a&gt; перевели на русский язык потрясающую документацию по всем темным углам JavaScript.&lt;/li&gt;
&lt;/ul&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href='http://www.slideshare.net/fullscreen/AddyOsmani/scalable-javascript-design-patterns/'&gt;JavaScript: patterns and antipatterns&lt;/a&gt; - отличная коллекция паттернов и анти-паттернов JavaScript от &lt;a href='http://www.blog.highub.com/'&gt;Shi Chuan&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href='http://www.slideshare.net/fullscreen/AddyOsmani/scalable-javascript-design-patterns/'&gt;Scalable JavaScript Design Patterns&lt;/a&gt; - великолепная презентация об основных паттернах проектирования в JavaScript от &lt;a href='http://addyosmani.com/blog/'&gt;Addy Osmani&lt;/a&gt;. Так же у Addy Osmani есть книга, глубже раскрывающая тему паттернов в JS: &lt;a href='http://addyosmani.com/resources/essentialjsdesignpatterns/book/'&gt;Learning JavaScript Design Patterns&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href='https://github.com/darcyclarke/Front-end-Developer-Interview-Questions'&gt;Front-end developer interview questions&lt;/a&gt; - Вопросы к собеседованию для frontend разработчиков от &lt;a href='http://darcyclarke.me/'&gt;Darcy Clarke&lt;/a&gt; и огромного числа соразработчиков. Основные темы - CSS, JS, jQuery, HTML.&lt;/li&gt;
&lt;/ul&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href='http://www.w3.org/TR/wai-aria/'&gt;Спецификация W3C по ARIA&lt;/a&gt; - ARIA уже в стадии Candidate Recommendation, так что стоит разобраться, что это такое.&lt;/p&gt;

&lt;h2 id='textmate'&gt;TextMate&lt;/h2&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;&lt;a href='http://tm2tips.tumblr.com/'&gt;Textmate 2 Tips&lt;/a&gt; - сайт с говорящим названием.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;&lt;a href='https://github.com/textmate/'&gt;Textmate Repos&lt;/a&gt; - аккаунт macromates на GitHub. Поиски TextMate bundles стоит начать именно отсюда.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id='id8'&gt;Дизайн&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href='http://papardes.blogspot.com/2009/08/blog-post_1162.html'&gt;Планетарная клаустрафобия&lt;/a&gt; - архитектурный теоретик &lt;a href='http://www.blogger.com/profile/10975104695224234620'&gt;Александр Раппапорт&lt;/a&gt; рассказывает глобализации в дизайне и ее негативных последствиях.&lt;/li&gt;
&lt;/ul&gt;</content>
 </entry>
 
 <entry>
   <title>Просмотр man-страниц в textmate</title>
   <link href="http://anton-shuvalov.info/2012/06/23/Reading-mans-in-TextMate2"/>
   <updated>2012-06-23T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/06/23/Reading-mans-in-TextMate2</id>
   <content type="html">&lt;p&gt;&lt;img alt='' src='http://31808.selcdn.ru/it-prm/pics/man.jpg' /&gt;&lt;/p&gt;
&lt;h5 style='text-align:center !important;font-style:italic;'&gt;мануал о том как использовать textmate для просмотра мануалов&lt;/h5&gt;
&lt;h2 id='man'&gt;man&lt;/h2&gt;

&lt;p&gt;Часто, читая man&amp;#8217;ы, я чувствую себя этаким гиком 70-ых. В дебрях терминала, среди черно-белых текстовых полотен. Ни подсветки текста, ни удобной навигации. Кто-то скажет, что, читая man, люди меньше всего думают об интерфейсе. Но с другой стороны, сегодня многие люди предпочитают google, и различные приложения-справочники, олдскуллным консольным man-страницам. Я попробую сделать чтение man&amp;#8217;ов более привлекательным.&lt;/p&gt;

&lt;h2 id='_textmate2___man'&gt;Использование textmate2 для чтения man&amp;#8217;ов&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;«Использовать один редактор — это хорошо».&lt;/em&gt;&lt;br /&gt;Pragmatic Programmer&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Для меня, бесспорно, главным и единственным редактором кода является textmate2. Я попробую научить этот редактор читать маны. В этой статье речь пойдет именно о второй версии TextMate. У меня сейчас установлен TextMate Version 2.0 (9090).&lt;/p&gt;

&lt;h2 id='_'&gt;Установка бандла&lt;/h2&gt;

&lt;p&gt;Для начала я установил в TextMate &lt;a title='TextMate Man Pages Bundle' href='https://github.com/textmate/man-pages.tmbundle'&gt;бандл для чтения man-страниц&lt;/a&gt;. Скачал, проверил, что название папки заканчивается на &lt;code&gt;.tmbundle&lt;/code&gt;. Скопировал бандл в папку.&lt;pre&gt;~/Library/Application Support/TextMate/Managed/Bundles
&lt;/pre&gt; Перезапустил TextMate.&lt;/p&gt;

&lt;h2 id='_'&gt;Использование бандла&lt;/h2&gt;

&lt;p&gt;Выбираю в меню &lt;code&gt;Bundles-&amp;gt;Man Pages-&amp;gt;View Man Page&lt;/code&gt;. В появившемся окне набираю название shell-команды, например &lt;code&gt;man&lt;/code&gt;, и умиляюсь открывшейся TextMate man-страницей. Для того, что бы воспользоваться второй командой бандла - &lt;code&gt;Visit man Page&lt;/code&gt; - нужно выделить какую-нибудь shell-команду в тексте. По нажатию на хоткей, либо выбрав в меню &lt;code&gt;Bundles-&amp;gt;Man Pages-&amp;gt;Visit man Page&lt;/code&gt;, откроется новая вкладка со справкой по выделенной команде.&lt;/p&gt;

&lt;h3 id='_____'&gt;Для гиков и перфекционистов: настройка бандла&lt;/h3&gt;

&lt;p&gt;Для меня совершенно неудобно тянуться к тэчпаду или мыши, и выделять руками команду. Это лечится настройкой входных данных. Выбираю в меню &lt;pre&gt;Bundles-&gt;Edit Bundles...-&gt;Man Pages-&gt;Menu Actions-&gt;Visit Man Page&lt;/pre&gt; Слева в настройках нужно установить значение поля &lt;code&gt;input&lt;/code&gt; равным &lt;code&gt;word&lt;/code&gt;. Здесь же, в редакторе бандлов, можно настроить удобные хоткеи. Они задаются в поле &lt;code&gt;Key Equivalent&lt;/code&gt;. Не стоит обделять гуманным сочетанием клавиш и &lt;code&gt;View Man Page&lt;/code&gt;. Да, что бы заставить хоткеи работать - мне пришлось удалить значение поля &lt;code&gt;Scope Selector&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id='_textmate____'&gt;Учим textmate читать маны из консоли.&lt;/h2&gt;

&lt;p&gt;И вроде бы, когда я пишу код в TextMate, все круто: если мне нужна справка - жму хоткей - читаю, просвещаюсь, жгу дальше дальше. Но что мне делать, если я тщетно пытаюсь заставить что-то работать прямо в консоли? Получается, что мне и man там же читать? Нет, это никуда не годится. Я решил использовать &lt;a href='https://github.com/textmate/man-pages.tmbundle/blob/master/Support/mman'&gt;bash-скрипт&lt;/a&gt;, на котором базируется бандл &amp;#8220;Man Pages&amp;#8221; как обертку к стандартной команде man.&lt;/p&gt;

&lt;p&gt;Для начала узнаем, где лежит оригинальный ман.&lt;br /&gt;&lt;code&gt;which man&lt;/code&gt;&lt;br /&gt;Скорее всего это &lt;code&gt;/usr/bin/man&lt;/code&gt;. Думаю, что бывают исключения.&lt;/p&gt;

&lt;p&gt;Для всех скриптов, к которым я лично приложил руку - у меня есть специальный каталог &lt;code&gt;~/.scripts&lt;/code&gt;. Каталог прописан в переменной окружения &lt;code&gt;$PATH&lt;/code&gt;. Я нахожу это удобным. Краткая инструкция о создании такого каталога:&lt;br /&gt;&lt;pre&gt;
&lt;code&gt;mkdir ~/.scripts # Создаем директорию
mate ~/.profile  # Добавляем ее в $PATH&lt;/code&gt;
&lt;/pre&gt;В открывшемся окне TextMate нужно дописать строчку &lt;pre&gt;export PATH=$HOME/.scripts:$PATH
&lt;/pre&gt; Либо, если &lt;code&gt;export PATH&lt;/code&gt; уже есть, то дописать в нем, сразу после &lt;code&gt;=&lt;/code&gt; &lt;code&gt;$HOME/.scripts:&lt;/code&gt;. Создадим в &lt;code&gt;~/.scripts&lt;/code&gt; ссылку на наш скрипт:&lt;br /&gt;&lt;pre&gt;
&lt;code class='bash'&gt;ln -s /Users/shuvalov/Library/Application\ Support/TextMate/Managed/Bundles/textmate-man-pages.tmbundle/Support/mman ~/.scripts/man&lt;/code&gt;
&lt;/pre&gt; В этот момент, так как я определил директорию с нашим скриптом раньше всего, стандартный &lt;code&gt;man&lt;/code&gt; перестанет работать. Вместо него будет выполняться наш скрипт. Теперь осталось изменить в скрипте вызов &lt;code&gt;man&lt;/code&gt; на &lt;code&gt;/usr/bin/man&lt;/code&gt; (либо путь до оригинальной команды man). Отрываю файл &lt;pre&gt;&lt;code class='bash'&gt;~/Library/Application\ Support/TextMate/Managed/Bundles/textmate-man-pages.tmbundle/Support/mman&lt;/code&gt;
&lt;/pre&gt; и отредактируем его. (&lt;a href='https://github.com/shuvalov-anton/dot-scripts/blob/a6e615ca211674b57a13a855e297dac3d7fa4c1f/man'&gt;мой пример&lt;/a&gt;).&lt;br /&gt;Набираем &lt;code&gt;man man&lt;/code&gt; и видим результат труда - man-страница открывается в новом окне textmate, переливаясь чинной подсветкой синтаксиса.&lt;/p&gt;

&lt;p&gt;Напоследок. Если, просматривая man в textmate, нажать &lt;code&gt;shift+cmd+t&lt;/code&gt;, то откроется меню навигации по ману. Только вот, что бы заставить его работать, нужно в последней строчке скрипта изменить значение sleep на 180, продлив время жизни временной страницы: &lt;br /&gt;&lt;pre&gt;
&lt;code&gt;(sleep 180; rm -f $tmp) &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;lt;/dev/null &amp;amp;&lt;/code&gt;
&lt;/pre&gt;&lt;/p&gt;

&lt;h2 id='id7'&gt;Заключение.&lt;/h2&gt;

&lt;p&gt;Читать маны в textmate2 эпически удобно. Так же, удобно уметь использовать один редактор для всех своих задач и не распыляйться.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Планетарная клаустрофобия</title>
   <link href="http://anton-shuvalov.info/2012/06/19/Planetary-Claustrophobia"/>
   <updated>2012-06-19T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/06/19/Planetary-Claustrophobia</id>
   <content type="html">&lt;p&gt;Цитата из лекции &amp;#8220;Симптомы системного кризиса в архитектуре&amp;#8221;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;«Дизайн способствует распространению по земному шару стереотипных и типовых изделий. Куда бы вы ни приехали - из Америки в Малазию - вы попадете в аэропорт, который мало отличается из аэропорта, который вы покинули. Потом вы попадете в гостинницу, которая мало отличается от гостинницы в вашем родном городе. Потом вы пойдете в кафе, и будете пить кофе из чашек, которые мало отличаются от ваших. Вас, конечно, приведут к объектам, которых действительно у вас нет. К старинной ступе, архитектуре, к какой-нибудь пальме, но это всего лишь музейные вкрапления в стереотипный мир. Мир, с огромной скоростью становится стереотипным, и это вызывает эффект сокращения размера планетарной поверхности»&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a href='http://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%BF%D0%BF%D0%B0%D0%BF%D0%BE%D1%80%D1%82,_%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B0%D0%BD%D0%B4%D1%80_%D0%93%D0%B5%D1%80%D0%B1%D0%B5%D1%80%D1%82%D0%BE%D0%B2%D0%B8%D1%87'&gt;Александр Раппапорт&lt;/a&gt;</content>
 </entry>
 
 <entry>
   <title>mate и rmate в TextMate&nbsp;2</title>
   <link href="http://anton-shuvalov.info/2012/06/15/TextMate2-mate-and-rmate"/>
   <updated>2012-06-15T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/06/15/TextMate2-mate-and-rmate</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/TextMate2.png' width='183px' /&gt;
&lt;h2 id='id4'&gt;Введение&lt;/h2&gt;

&lt;p&gt;Я полностью согласен с авторами &lt;a href='http://www.amazon.com/The-Pragmatic-Programmer-Journeyman-Master/dp/020161622X'&gt;“The Pragmatic Programmer”&lt;/a&gt; &lt;a href='http://andy.pragprog.com/'&gt;Andrew Hunt&lt;/a&gt; и &lt;a href='http://pragdave.pragprog.com/'&gt;David Thomas&lt;/a&gt; в том, что иметь один-единственный редактор текста для всего - это прекрасно. Таким редактором для меня является &lt;a title='TextMate Blog &amp;amp;raquo; TextMate 2.0 Alpha' href='http://blog.macromates.com/2011/textmate-2-0-alpha/'&gt;textmate 2&lt;/a&gt;. Я стараюсь использовать его везде, где это возможно. В основном я работаю с &lt;a title='Wikipedia Entry: JS' href='http://en.wikipedia.org/wiki/JS'&gt;JS&lt;/a&gt;&lt;code&gt;, &lt;/code&gt;&lt;a title='Wikipedia Entry: HTML' href='http://en.wikipedia.org/wiki/HTML'&gt;HTML&lt;/a&gt;, &lt;a title='Wikipedia Entry: Cascading Style Sheets' href='http://en.wikipedia.org/wiki/CSS'&gt;CSS&lt;/a&gt; и &lt;a title='Daring Fireball: Markdown' href='http://daringfireball.net/projects/markdown/'&gt;markdown&lt;/a&gt; для статей и заметок. Бывает пишу &lt;a title='Wikipedia Entry: PHP' href='http://en.wikipedia.org/wiki/PHP'&gt;PHP&lt;/a&gt;-код и &lt;a title='Wikipedia Entry: Shell' href='http://en.wikipedia.org/wiki/Shell'&gt;SHELL&lt;/a&gt;-скрипты. Изредка судьба, улыбаясь, заставляет меня писать на &lt;a title='Wikipedia Entry: Pascal' href='http://en.wikipedia.org/wiki/Pascal'&gt;pascal&lt;/a&gt;. С помощью различных дополнений, область применения textmate можно расширять практически бесконечно.&lt;/p&gt;

&lt;p&gt;Textmate поставляется с двумя консольными скриптами &lt;em&gt;mate&lt;/em&gt; и &lt;em&gt;rmate&lt;/em&gt;. &lt;code&gt;mate&lt;/code&gt; позволяет из терминала открыть файл в textmate. Выглядит это, к примеру, так - &lt;code&gt;sudo mate /etc/hosts/&lt;/code&gt;. С помощью &lt;code&gt;rmate&lt;/code&gt; можно провернуть то-же самое, но на удаленнам сервере. Раньше я ежедневно пользовался &lt;code&gt;ssh&lt;/code&gt; или даже &lt;code&gt;sshfs&lt;/code&gt; для редактирования файлов на сервере. С одной стороны перспектива редактирования кода в &lt;em&gt;vim&lt;/em&gt;-подобных редакторах, с другой медленная скорость работы &lt;code&gt;sshfs&lt;/code&gt; как файловой системы. В целом, удаленное редактирование файлов мне не импонировало ни тем, ни другим&amp;#8230;&lt;/p&gt;

&lt;h2 id='mate'&gt;Mate&lt;/h2&gt;

&lt;p&gt;В консоли Mac OS X существует команда &lt;a title='open(1) Mac OS X Manual Page' href='https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html'&gt;open&lt;/a&gt;, заменяющая в терминале двойной клик по файлу. &lt;code&gt;open -a&lt;/code&gt; в терминале заменяет команду &amp;#8220;открыть с помощью&amp;#8221;. Например, что бы открыть из терминала в textmate файл, &lt;code&gt;/etc/hosts&lt;/code&gt;, вполне можно обойтись командой &lt;code&gt;open /etc/hosts/ -a TextMate&lt;/code&gt;. Несколько файлов открываются командой &lt;pre&gt;&lt;code&gt;open ~/.bashrc ~/.profile -a TextMate&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Но команда &lt;code&gt;open&lt;/code&gt; имеет несколько ограничений. Невозможно открыть файл на определенной строке. Так же невозможно придержать консоль до закрытия файла. Последнее ограничение не позволяет использовать textmate как внешний редактор, например, для git или svn.&lt;/p&gt;

&lt;p&gt;По этому у textmate есть замена неповоротливому &lt;code&gt;open&lt;/code&gt; - &lt;code&gt;mate&lt;/code&gt;. Скрипт устанавливатется из textmate-preferences-terminal. &lt;code&gt;mate&lt;/code&gt; позволяет использовать textmate из терминала, так как-будто это действительно консольное приложение. Например, для того, что бы использовать его как внешний редактор для всех консольных приложений просто добавим это в &lt;code&gt;./profile&lt;/code&gt;:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;export EDITOR='mate -w'&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Ключ &lt;code&gt;-w&lt;/code&gt; - заставляет терминал дождаться закрытия файла, перед продолжением.&lt;/p&gt;

&lt;h2 id='rmate'&gt;Rmate&lt;/h2&gt;

&lt;h3 id='ssh'&gt;SSH-туннель&lt;/h3&gt;

&lt;p&gt;Если говорить кратко - &lt;code&gt;ssh&lt;/code&gt;-туннель перенаправляет траффик с определенного порта на любой порт локальной машины посредством &lt;code&gt;ssh&lt;/code&gt;-соединения. Создадим туннель для того, что бы получить возможность редактировать файлы на сервере с помощью textmate:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;ssh -R 52698:localhost:52698 &amp;lt;user&amp;gt;@&amp;lt;server&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Возможно, будет проще обновить настройки &lt;code&gt;ssh&lt;/code&gt; подключения, для того, что бы туннель всегда создавался автоматически, без ключа &lt;code&gt;-R&lt;/code&gt; и объявления пробрасываемых портов.&lt;br /&gt;Для единственного сервера добавим следующие строки в &lt;code&gt;~/.ssh/config&lt;/code&gt;:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;Host &amp;lt;адрес сервера&amp;gt;
RemoteForward 52698 127.0.0.1:52698&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Либо можно использовать тоннель как настройку по-умолчанию, для любого сервера:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;Host *
RemoteForward 52698 127.0.0.1:52698&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;h3 id='id5'&gt;Установка&lt;/h3&gt;

&lt;p&gt;Создаем новый файл на сервере, скопируем в него содержимое rmate (&lt;code&gt;preferences &amp;gt; terminal: ссылка rmate &lt;/code&gt;) и дадим права на исполнение: &lt;pre&gt;&lt;code class='bash'&gt;# rmate доступен всем пользователям
sudo vi /usr/local/bin/rmate
chmod +x /usr/local/bin/rmate
&lt;/code&gt;&lt;/pre&gt; &lt;pre&gt;&lt;code class='bash'&gt;# rmate доступен только текущему пользователю (проверь, есть ли этот каталог в $PATH)
vi ~/bin/rmate
chmod +x ~/bin/rmate
&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Альтернативный вариант - использовать команду scp для того, что бы залить скрипт с локальной машины на сервер. Выглядит это примерно так: &lt;pre&gt;&lt;code&gt;scp /Applications/TextMate.app/Contents/Frameworks/Preferences.framework/Versions/A/Resources/rmate &amp;lt;пользователь&amp;gt;@&amp;lt;сервер.com&amp;gt;:/usr/local/bin/&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Вот и все. Больше нам не придется к этому возвращаться.&lt;/p&gt;

&lt;p&gt;Теперь можно использовать &lt;code&gt;rmate&lt;/code&gt; на сервере. Проверим, как он работает:&lt;br /&gt;&lt;pre&gt;&lt;code class='bash'&gt;rmate ~/test.txt&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Мы должны увидеть новое окно textmate с пустым файлом. Напишем что-нибудь в этом файле. После сохранения файл появится на сервере.&lt;/p&gt;

&lt;h3 id='_'&gt;Известные проблемы&lt;/h3&gt;

&lt;h4 id='usrbinenv_ruby_no_such_file_or_directory'&gt;/usr/bin/env: ruby: No such file or directory&lt;/h4&gt;

&lt;p&gt;На сервере не установлен ruby-интерпретатор. &lt;a href='http://mike.eire.ca/'&gt;Michael Newton&lt;/a&gt; переписал &lt;a href='http://pastebin.com/GcSXtTW2'&gt;rmate на php&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id='warning_remote_port_forwarding_failed_for_listen_port_52698'&gt;Warning: remote port forwarding failed for listen port 52698&lt;/h4&gt;

&lt;p&gt;На сервере 52698 порт уже чем-то занят. Нужно отключиться от сервера, и создать ssh-туннель используя другой порт:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;ssh -R &amp;lt;мой-порт&amp;gt;:localhost:52698 &amp;lt;user&amp;gt;@&amp;lt;server&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Теперь, запуская rmate нужно так же указывать номер порта:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;rmate -p &amp;lt;мой-порт&amp;gt; rmate_rocks.txt&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;В результате ssh-туннель будет пересылать данные с вашего порта на сервере к порту 52698 на локальной машине. В настройках textmate ничего менять не нужно.&lt;/p&gt;

&lt;h3 id='id6'&gt;Заключение&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;rmate&lt;/code&gt; и &lt;code&gt;mate&lt;/code&gt; расширяют возможности использования textmate до удаленных серверов и консольных приложений. Здесь можно найти миллион замечательных способов применения этого уютного редактора. Например, можно использовать textmate для того, что бы писать комментарии к коммиту изменений на github:&lt;br /&gt;&lt;pre&gt;&lt;code&gt;export GIT_EDITOR=&quot;mate --name 'Git Commit Message' -w -l 1&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;

&lt;p&gt;Много всего можно придумать, и я очень рад, что погружаться в дебри консоли я буду с комфортным мне редактором кода.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Использование rmate в TextMate2</title>
   <link href="http://anton-shuvalov.info/2012/06/03/Textmate2-rmate"/>
   <updated>2012-06-03T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/06/03/Textmate2-rmate</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/TextMate2.png' width='183px' /&gt;
&lt;p&gt;Решил попробовать в деле одно из нововведений второй версии textmate - rmate. Для того, что бы заставить эту штуку работать нам понадобится:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Установленный ruby на сервере. 2. выполнить в терминале клиента: &lt;pre&gt;scp /Applications/TextMate.app/Contents/Frameworks/Preferences.framework/Versions/A/Resources/rmate user@example.com:/usr/local/bin&lt;/pre&gt; Здесь мы отправляем на удаленный сервер скрипт, обеспечиващий работу комманды &lt;code&gt;rmate&lt;/code&gt; (адрес скрипта можно узнать кликнув на слово &lt;code&gt;rmate&lt;/code&gt; в &lt;code&gt;preferences &amp;gt; terminal&lt;/code&gt;). &lt;code&gt;user@example.com&lt;/code&gt; — это адрес нашего сервера и пользователь, под которым мы произведем запись файла. &lt;code&gt;/usr/local/bin&lt;/code&gt; - это каталог, в котором находятся наши приложения. Bash в первую очередь будет искать здесь то, что мы пытаемся запустить в терминале. В принципе, можно указать любой другой каталог, но тогда запускать &lt;code&gt;rmate&lt;/code&gt; придется либо явно указывая путь, либо добавив этот путь в переменную окружения &lt;code&gt;$PATH&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Для того что бы наш сервер мог делегировать редактирование файла редактору на клиенте - нам нужно установить SSH-туннель. Делается это следующим образом:&lt;br /&gt;&lt;pre&gt;ssh -R 52698:127.0.0.1:52698 user@example.com&lt;/pre&gt; где &lt;code&gt;user@example.com&lt;/code&gt; - имя пользователя и адрес удаленного сервера. &lt;em&gt;Если в &lt;code&gt;~/.ssh/config&lt;/code&gt; клиента прописать: &lt;pre&gt;Host example.com
RemoteForward 52698 127.0.0.1:52698&lt;/pre&gt; то тунель будет создаваться автоматически, без необходимости явно его объявлять.&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Проверить работу нашего скрипта, например, написав в консоли &lt;code&gt;rmate test.txt&lt;/code&gt;. К этому моменту у нас должен быть открыт textmate. Файл test.txt откроется в его новом окне, где его можно редактировать. Сохранив файл, выполним в консоли vim test.txt и увидим в vim&amp;#8217;е все изменения, которые мы внесли с помощью textmate.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 
 <entry>
   <title>Загрузка JavaScript-приложения (Yandex)</title>
   <link href="http://anton-shuvalov.info/2012/05/26/JavaScript-Loading-Apps"/>
   <updated>2012-05-26T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/05/26/JavaScript-Loading-Apps</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/dump.png' /&gt;
&lt;p&gt;&lt;a href='http://www.slideshare.net/azproduction/dumpit-javascript'&gt;ссылка на презентацию&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Проблема&lt;/em&gt;: Слишком большое время загрузки страницы в условиях плохого ( мобильного ) интернета.&lt;/p&gt;

&lt;p&gt;JS становится все более популярным языком программирования. Средний размер сценариев на сайте растет. Так же это имеет негативные стороны, так для отправки одного твита необходимо &lt;a href='mike.teczno.com/notes/bandwidth.html'&gt;загрузить 1.653Мб кода&lt;/a&gt;. В медленном мобильном вебе проблема выражена особенно ярко - загрузка JS может достигать нескольких минут.&lt;/p&gt;

&lt;p&gt;Даже если мы будем загружать все js-файлы ассинхнонно &lt;code&gt;&amp;lt;script src=&amp;quot;main.js async&amp;quot;&amp;gt;&lt;/code&gt; - интерпретация JS будет происходить последовательно, блокируя работу до загрузки всех файлов. Это не даст нам никакой выгоды при рендеринге страницы&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Существующие решения&lt;/em&gt;:.&lt;/p&gt;

&lt;p&gt;Автор отталкивается от того, что объем используемого кода на каждой странице сайта составляет ~40% от всего кода, следовательно решение лежит в использовании ленивости при загрузке JS (грузится только то, что используется)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href='http://developer.yahoo.com/yui/compressor/'&gt;YUI Compressor&lt;/a&gt; - написаный на java js-minifier. Заменяет переменные их сокращенными (обычно до 1 символа) вериантами. Требует JAVA на серверe.&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;&lt;a href='http://www.html5rocks.com/ru/tutorials/appcache/beginner/'&gt;CACHE MANIFEST&lt;/a&gt; - это специальным образом сформированый текстовый файл, содержащий ссылки на файлы, которые браузеру нужно кэшировать. &lt;code&gt;&amp;lt;html manifest=&amp;quot;example.appcache&amp;quot;&amp;gt;&lt;/code&gt;. Должен передаваться с MIME-типом &amp;#8220;text/cache-manifest&amp;#8221;. Объем кэшированных данных для сайтов не может превышать 5 МБ. Позволяет работать с сайтом в offline( на основе кэшированной версии )&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;&lt;a href='http://requirejs.org/'&gt;AMD&lt;/a&gt; - асинхронная декларация модулей. Подгружает модули в зависимости от зависимостей, которые явно указываются в коде: &lt;code&gt;define([&amp;#39;dep1&amp;#39;, &amp;#39;dep2&amp;#39;]&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;&lt;a href='https://github.com/azproduction/lmd'&gt;LMD&lt;/a&gt; - ленивая декларация модулей похожа на AMD, но отличается тем, что не требует явного объявления зависимостей. Все зависимости определяются при запуске кода.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Вывод&lt;/em&gt;:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;appCache&lt;/strong&gt; ( см. &lt;a href='https://developer.mozilla.org/en/Using_Application_Cache'&gt;Использование appCache (mdn)&lt;/a&gt;, &lt;a href='https://github.com/jamesgpearce/confess'&gt;confess&lt;/a&gt; )&lt;/li&gt;

&lt;li&gt;&lt;a href='http://developer.yahoo.com/yui/compressor/'&gt;&lt;strong&gt;yuicompressor&lt;/strong&gt;&lt;/a&gt;)&lt;/li&gt;

&lt;li&gt;&lt;a href='https://github.com/azproduction'&gt;&lt;strong&gt;lmd&lt;/strong&gt;&lt;/a&gt;/&lt;a href='http://requirejs.org/'&gt;&lt;strong&gt;amd&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 
 <entry>
   <title>Странные ссылки в iBooks</title>
   <link href="http://anton-shuvalov.info/2012/05/24/iBooks-Strange-links"/>
   <updated>2012-05-24T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/05/24/iBooks-Strange-links</id>
   <content type="html">&lt;img class='img-center' alt='iBooks Author' src='http://31808.selcdn.ru/it-prm/pics/hero_ibooks_author.png' /&gt;
&lt;p&gt;Я занимаюсь разработкой книг для iBooks. Одна из задач с которыми я столкнулся в процессе разработки - раелизация таймлайна. Таймлайн должен находиться на каждой странице содержать ссылки на разделы учебника. Сначала у меня были мысли сделать таймлайн с помощью виджета. При подобной реализации у меня были бы развязаны руки для любых извращений в плане дизайна и UX, но я не нашел никакой информаци о существовании какого-бы то ни было API в iBooks, следовательно, я не представлял никакой возможности дотянуться до страниц книги из виджета.&lt;/p&gt;

&lt;p&gt;Я решил воспользоваться стандартным механизмом iBooks - гиперссылками. Прочитав справку к приложению, я решил использовать закладки. План был следующим:&lt;/p&gt;

&lt;p&gt;* Выделяем текст в начале главы. * Создаем из него закладку * Создаем ссылку на этот текст в таймлайне. * Применяем шаблон с таймлайном ко всем страницам * Профит&lt;/p&gt;

&lt;p&gt;Но когда я реализовал все это - я уведел совсем не тот результат, на который я расчитывал: при переходе, текст, который являлся закладкой выделялся желтым цветом, как бы намекая на то, что ссылка была именно на него, а не на страницу. Это, конечно, логично, но это было совсем не то, чего я добивался. Мне нужен обычный переход, что бы открылась нужная страница книги, и не происходило никаких лишних вещей. Посмотрим ман ibooks&amp;#8217;а внимательней:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Выберите требуемый вариант во всплывающем меню «Ссылка на».&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Веб-страницу Введите URL-адрес.&lt;/li&gt;

&lt;li&gt;Сообщение e-mail Введите адрес электронной почты и строку темы.&lt;br /&gt;3. Закладка Выберите закладку во всплывающем меню «Имя». При отсутствии закладок во всплывающем меню «Имя» добавьте их согласно приведенной ниже инструкции.&lt;br /&gt;4. Рисунок Выберите рисунок в списке «Имя». Для просмотра объектов определенного типа (например, всех фильмов или галерей) выберите требуемый вариант во всплывающем меню «Показать».&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Остановимся подробней на пункте 4 со странным названием &amp;#8220;рисунок&amp;#8221;. Под таким названием переводчики подразумевали все интерактивные элементы книги. Когда я попытался использовать его впервые, то я увидел в списке объектов для ссылок только тесты. Я решил почитать об этой странности, и наткнулся на книгу издательства &amp;#8221;O&amp;#8217;Reily&amp;#8221; &lt;a href='http://shop.oreilly.com/product/0636920025597.do'&gt;Publishing with iBooks Author&lt;/a&gt;. Как это ни странно, книга бесплатна. Скачав книгу, я нашел в ней параграф, касающийся ссылок:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Author does make it easier to add links to labeled objects, like Galleries (see “Gallery” (page 59)), Media boxes (see “Media” (page 60)), and Figures (see “Figures” (page 55)). Select the text that you want to turn into a link, and choose Insert → Hyperlink → Figure Reference. The Link Inspector opens, giving you a list of all the labeled objects in your book to choose from. Click the one you want to link to, and your clickable link is all set.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ключевое слово - &amp;#8221;&lt;em&gt;labeled&lt;/em&gt;&amp;#8221;, то есть объект, должен обязательно иметь метку, а все мои картинки, видео и презентации в книге этих меток не имели. Опять обратимся к документации:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;К любому объекту можно добавить заголовок или подпись (или заголовок и подпись одновременно). Заголовок может содержать метку (например, Рисунок или Галерея). Можно создавать пользовательские метки. Если создать для объекта заголовок или подпись, объект будет отображаться в готовой книге и в горизонтальной, и в вертикальной ориентации. В вертикальной ориентации объекты, имеющие заголовок или подпись, располагаются вдоль левого края страницы.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Вот она и разгадка страннейшего поведения ссылок в iBooks. Так как вертикальную ориентацию книги я не использую, то у меня не возникало необходимости в использовании меток. Добавив к видео-вступлению, которое идет в начале каждой главы метку, прозрачного цвета (что бы ее не было видно), я получил возможность ссылаться на него, что, в принципе, вполне решает мою задачу.&lt;/p&gt;

&lt;p&gt;Кстати, это удивительно, но ссылки в iBooks author и keynote реализуются совершенно по разному, беспардонно нарушая эвристики Нильсена. Назову пару самых странных отличий:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;В KeyNote любой объект может являться ссылкой. В iBooks только текст.&lt;/li&gt;

&lt;li&gt;В KeyNote можно ссылаться на слайды(страницы), в iBooks только на определенные объекты (закладки, интерактивные оъекты с метками).&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 
 <entry>
   <title>Сломаные заполнители в iBooks</title>
   <link href="http://anton-shuvalov.info/2012/05/05/iBooks-Broken-placeholders"/>
   <updated>2012-05-05T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/05/05/iBooks-Broken-placeholders</id>
   <content type="html">&lt;img class='img-center' alt='iBooks Author' src='http://31808.selcdn.ru/it-prm/pics/hero_ibooks_author.png' /&gt;
&lt;h2 id='id1'&gt;Начало&lt;/h2&gt;

&lt;p&gt;Несколько недель назад мы начали разработку книги для iBooks. Так как разработчиков было несколько - нужно было как-то согласовывать работу. Для решения этой задачи я решил использовать шаблоны iBooks, что, в принципе, вполне логично. План заключался в том, что бы заранее подготовить все необходимые шаблоны, которые могли бы использовать все разработчики. В результате мы получим книгу, выполненную в едином стиле, не затрачивая лишних усилий, на обсуждение вопросов стилизации, которые могли бы возникнуть в процессе. В общем, шаблоны - это просто и логично. Любой серьезный проект должен иметь набор необходимых шаблонов.&lt;/p&gt;

&lt;h2 id='id2'&gt;Факап&amp;#8230;&lt;/h2&gt;

&lt;p&gt;Проблема, с которой я сталкнулся, когда начал разрабатывать шаблоны - невозможность редактирования заполнителей на страницах. Это было странно. Я создавал необходимый блок в шаблоне страницы, заполнял его текстом. Согласно справке заходил в меню &amp;#8220;формат&amp;#8221; -&amp;gt; &amp;#8220;дополнительные параметны&amp;#8221; -&amp;gt; &amp;#8220;Определить как заполнитель текста&amp;#8221;. Вроде бы все должно было быть круто: бери и меняй заполнители там, где нужно, но не тут то было. Блок с текстом было просто невозможно выделить. Невозможно редактировать. Но ведь заполнитель текста нужен за тем, что бы его редактировать!?&amp;#8230; Даже если не использовать заполнители, все равно текст, который я вставлял в шаблоны iBooks не поддавался правке на конечных страницах.&lt;/p&gt;

&lt;h2 id='_'&gt;Где решение?&lt;/h2&gt;

&lt;p&gt;В тот момент я так и не смог найти правильное решение, ни &amp;#8220;курение манов&amp;#8221;, ни гугл не давали нужного ответа. А так как время - конечный ресурс, я отказался от заполнителей. Я использовал готовые шаблоны, меняя их под свои нужды. Часто я все равно сталкивался с проблемой редактирования объектов из шаблона на странице. Спасая себя магическим сочетанием клавиш &amp;#8220;cmd+z&amp;#8221;, я сделал более-менее приемлимый шаблон. Для интерактивного-контента я сделал главу, куда поместил все стилизованные виджеты и элементы. Добавлять их в книгу я решил копи-пастом. Можно работать, хотя и не так удобно, как вышло бы с нормально работающими шаблонами.&lt;/p&gt;

&lt;p&gt;Недавно, смотря закладки по тегу &amp;#8220;iBooks&amp;#8221; в &lt;a href='http://pinboard.in'&gt;pinboard&lt;/a&gt;, наткнулся на статью о том, &lt;a href='http://www.davidebarranca.com/2012/04/ibooks-author-fullscreen-images/'&gt;как получить действительно полноэкранное изображение.&lt;/a&gt; Без лишних рамок, заголовков и описаний. Внезапно, в конце статьи я нашел решение своей старой проблемы с заполнителями.&lt;/p&gt;

&lt;h2 id='id3'&gt;Отгадка&lt;/h2&gt;

&lt;p&gt;Для того, что бы заполнитель функционировал правильно необходимо выставить еще один параметр. В целом схема такая: 1. Формат – Дополнительные параметры – Определить как заполнитель (медиа-файлов или текста). 2. В разделе инспектора &amp;#8220;макет&amp;#8221; нужно выставить чекбокс &amp;#8220;редактируемы на страницах использующих этот макет&amp;#8221;.&lt;/p&gt;

&lt;p&gt;Я потратил много полезного времени из-за того, что не знал этого решения. Из-за того, что в документации к iBooks author не нашел упоминания о нужном чекбоксе. Но я рад, что я теперь знаю правильное решение. Теперь я могу использовать шаблоны.&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Почему я учу NODE.JS</title>
   <link href="http://anton-shuvalov.info/2012/05/02/Why-I-am-Learning-Node"/>
   <updated>2012-05-02T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/05/02/Why-I-am-Learning-Node</id>
   <content type="html">&lt;img class='img-center' src='http://31808.selcdn.ru/it-prm/pics/jsninja.jpg.scaled696.png' width='271px' /&gt;&lt;p&gt;Как многие (если не все), знают, я пишу на python. Пишу каждый день, и мне это нравится. Ради веселья и  опыта я начал писать на django, и перенес на него множество строк нативного питона.&lt;/p&gt;&lt;p&gt;Я был погружен в свой эпохальный back-end код, и редко получал шанс попрактиковаться в моем фронтэнд кон-фу. В результате подобной практики, я был полным нубом во фрондэнде.&lt;/p&gt;&lt;p&gt;Я посасывал в HTML, CSS,  и JavaScript.&lt;/p&gt;&lt;p&gt;Но за последние годы, мой недостаток фронтэнда начал сильно мне мешать. Занимаясь разработкой проектов от концепции до продакшна, я не хотел попадать в такую ситуацию, когда, имея хорошую идею, я быстро писал бэкэнд, а потом тратил месяцы на разработку хотя бы сколько-нибудь пристойного фронтэнда.&lt;/p&gt;&lt;p&gt;Я начал заниматься веб-разработкой в те времена, когда javascript был всего лишь игрушкой, которую использовали для анимации меню. Теперь же этот язык используется везде: на стороне сервера (nodejs), на стороне клиента, и даже в базах данных (mongoDB).&lt;/p&gt;&lt;p&gt;Что ж... Я несколько лет не придавал должного значения JS, теперь же я решил наверстать упущенное, и погрузился в изучение языка. Я поставил себе цель - стать опытным js-разработчиком, и уметь:&lt;/p&gt;&lt;ol&gt;
	&lt;li&gt;Использовать некоторые из новых JS-фрэймворков и инструментов (node, backbone, knockout... )&lt;/li&gt;
	&lt;li&gt;Принимать участие в разработке тех js-проектов, которые мне интересны.&lt;/li&gt;
	&lt;li&gt;Писать свой собственный js код, как server side, так и client side, не чувствуя себя тупицей.&lt;/li&gt;
	&lt;li&gt;Быть в теме всей этой шумихи вокруг js.&lt;/li&gt;
&lt;/ol&gt;&lt;br /&gt;&lt;p&gt;К этому моменту, я имел хорошее представление о концепциях программирования. Первая вещь, которую я сделал - прочитал «&lt;a href='http://www.amazon.com/gp/product/0596517742/ref=as_li_ss_tl?ie=UTF8&amp;amp;tag=rdegges-20&amp;amp;linkCode=as2&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=0596517742'&gt;Javascript: The Good Parts&lt;/a&gt;».  Это было несколько недель назад, и, до сих пор, я не мог найти хорошей возможности применить полученные знания на практике.&lt;/p&gt;&lt;p&gt;Заметка: Если ты - опытный программист, и у тебя есть желание получше разобраться с JS, то вряд ли есть лучшей способ, чем «&lt;a href='http://www.amazon.com/gp/product/0596517742/ref=as_li_ss_tl?ie=UTF8&amp;amp;tag=rdegges-20&amp;amp;linkCode=as2&amp;amp;camp=1789&amp;amp;creative=390957&amp;amp;creativeASIN=0596517742'&gt;JavaScript: The Good Parties&lt;/a&gt;». Эта книга очень приятная, короткая и содержательная. В первую очередь я советую прочитать эту книгу.&lt;/p&gt;&lt;p&gt;Так вот... Я раздумывал о подходящем месте для применения своего нового javasrcipt-фу, и остановился на &lt;a href='http://nodejs.org/'&gt;nodejs&lt;/a&gt;. В прошлом я писал большое количество консольных приложений, по этому меня воротило от бесконечной перезагрузки страниц в браузере, необходимой для отладки своего кода. Nodejs стал подходящим выбором в этом отношении.&lt;/p&gt;&lt;p&gt;Если кто-то не знаком с node.js - это серверный javascript интерпретатор, позовляющий работать с js прямо из командной строки, как с ruby и perl. В комплекте с node.js идет отличный пакетный менеджер (&lt;a href='http://npmjs.org/'&gt;npm&lt;/a&gt;), позволяющий легко отправлять, скачивать и устанавливать js-модули.&lt;/p&gt;&lt;p&gt;Раньше я прочитал много негативных отзывов о &lt;a href='http://teddziuba.com/2011/10/node-js-is-cancer.html'&gt;nodejs&lt;/a&gt;, но теперь я могу им только удивляться, ведь node чертовски крут! Я еще не использовал его для создания веб-сайтов или чего-то подобного, но он реально делает js очень простым для таких ребят как я - матерых backend программистов, которые хотят разобраться с JavaScript’ом без глупых барьеров (да-да, сейчас я смотрю именно на вас, браузеры).&lt;/p&gt;&lt;p&gt;У node есть отличный пакетный менеджер, тонны потрясных модулей, огромное сообщество разработчиков, и отличная документация. Я написал свой первый модуль (&lt;a href='https://github.com/telephonyresearch/node-opencnam'&gt;node-opencnam&lt;/a&gt;) меньше чем за час. Это безумно круто!&lt;/p&gt;&lt;p&gt;Я проделал путь от нулевой отметки до публично доступного модуля меньше чем за 60 минут!..&lt;/p&gt;&lt;p&gt;После того, как я немного позабавлялся с nodejs, я намерен разобраться с ним получше, потому что он отличный помошник в изучении js. И я собираюсь использовать его в реализации своих идей, таким образом все ближе и ближе знакомясь с js как с языком программирования.&lt;/p&gt;&lt;p&gt;Я буду держать вас в курсе.&lt;/p&gt;&lt;p&gt;Заметка: в эти выходные я начал читать книгу &quot;&lt;a href='http://www.nodebeginner.org/'&gt;Node Beginner Book&lt;/a&gt;&quot;.&lt;/p&gt;&lt;hr /&gt;
&lt;p&gt;Перевод: &lt;a href='http://anton-shuvalov.info/'&gt;Антон Шувалов&lt;/a&gt;&lt;br /&gt;Автор: &lt;a href='http://rdegges.com/'&gt;Randall Degges&lt;/a&gt;&lt;/p&gt;</content>
 </entry>
 
 <entry>
   <title>Какими должны быть макеты</title>
   <link href="http://anton-shuvalov.info/2012/05/01/Best-sketch-of-website"/>
   <updated>2012-05-01T00:00:00+06:00</updated>
   <id>http://anton-shuvalov.info/2012/05/01/Best-sketch-of-website</id>
   <content type="html">&lt;p&gt;Пробираясь через дебри интернета в поисках интересных обоев по ссылкам в сети, наткнулся на классный блог -   &lt;a href='http://fiftyfootshadows.net'&gt;fiftyfootshadows&lt;/a&gt;. Пролистав две-три страницы с отличными фотографиями - я наткнулся на очень колоритный прототип сайта.
&lt;/p&gt;&lt;a href='http://fiftyfootshadows.net'&gt;&lt;img title='Открыть в полном размере' src='http://31808.selcdn.ru/it-prm/pics/sketch.jpg' /&gt;&lt;/a&gt;</content>
 </entry>
 
 
</feed>