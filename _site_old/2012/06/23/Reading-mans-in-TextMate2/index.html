
<!DOCTYPE html>
<html lang="en">
  <head>
	<meta name="google-site-verification" content="ymvEUIQUSh8G3bf-H26Z6iSAE8Acxa-5qSWb5MSZtvY" />
	  
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
	<title>Антон Шувалов :: Просмотр man-страниц в textmate</title>
	<meta name="author" content="Антон Шувалов">
	<meta name="description" content="">
	<meta name="keywords" content="" />
	<!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
	<link rel="shortcut icon"  href="/assets/themes/twitter/img/favicon.png">
	<link rel="image_src" href="/assets/themes/twitter/img/touch-icons/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" href="/assets/themes/twitter/img/touch-icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/themes/twitter/img/touch-icons/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/themes/twitter/img/touch-icons/apple-touch-icon-114x114.png">
	<link href="http://feeds.feedburner.com/anton-shuvalov/JHar" rel="alternate" title="Антон Шувалов" type="application/atom+xml" />
	<link rel="stylesheet" href="/assets/themes/twitter/bootstrap/css/style.css" media="all">
	<link rel="stylesheet" href="/assets/libs/highlight/highlight.css" media="all">
  </head>
  <body>
	  
	<header class="container site-header">
		<a class="rss-link" href="http://feeds.feedburner.com/anton-shuvalov/JHar">RSS</a>
		<h2 class="site-title"><a href="/">Антон Шувалов</a></h2>
		<p class="site-tagline">Ношу шлем. Тяжело дышу.</p>
		<hr>
	</header>
	
	<div class="container">
		<section class="content">
			
<div class="page-header">
  <h1>Просмотр man-страниц в textmate</h1>
</div>

<div class="row">
  <div class="span8 post-content">
    <p><img alt='' src='http://31808.selcdn.ru/it-prm/pics/man.jpg' /></p>
<h5 style='text-align:center !important;font-style:italic;'>мануал о том как использовать textmate для просмотра мануалов</h5>
<h2 id='man'>man</h2>

<p>Часто, читая man&#8217;ы, я чувствую себя этаким гиком 70-ых. В дебрях терминала, среди черно-белых текстовых полотен. Ни подсветки текста, ни удобной навигации. Кто-то скажет, что, читая man, люди меньше всего думают об интерфейсе. Но с другой стороны, сегодня многие люди предпочитают google, и различные приложения-справочники, олдскуллным консольным man-страницам. Я попробую сделать чтение man&#8217;ов более привлекательным.</p>

<h2 id='_textmate2___man'>Использование textmate2 для чтения man&#8217;ов</h2>

<blockquote>
<p><em>«Использовать один редактор — это хорошо».</em><br />Pragmatic Programmer</p>
</blockquote>

<p>Для меня, бесспорно, главным и единственным редактором кода является textmate2. Я попробую научить этот редактор читать маны. В этой статье речь пойдет именно о второй версии TextMate. У меня сейчас установлен TextMate Version 2.0 (9090).</p>

<h2 id='_'>Установка бандла</h2>

<p>Для начала я установил в TextMate <a title='TextMate Man Pages Bundle' href='https://github.com/textmate/man-pages.tmbundle'>бандл для чтения man-страниц</a>. Скачал, проверил, что название папки заканчивается на <code>.tmbundle</code>. Скопировал бандл в папку.<pre>~/Library/Application Support/TextMate/Managed/Bundles
</pre> Перезапустил TextMate.</p>

<h2 id='_'>Использование бандла</h2>

<p>Выбираю в меню <code>Bundles-&gt;Man Pages-&gt;View Man Page</code>. В появившемся окне набираю название shell-команды, например <code>man</code>, и умиляюсь открывшейся TextMate man-страницей. Для того, что бы воспользоваться второй командой бандла - <code>Visit man Page</code> - нужно выделить какую-нибудь shell-команду в тексте. По нажатию на хоткей, либо выбрав в меню <code>Bundles-&gt;Man Pages-&gt;Visit man Page</code>, откроется новая вкладка со справкой по выделенной команде.</p>

<h3 id='_____'>Для гиков и перфекционистов: настройка бандла</h3>

<p>Для меня совершенно неудобно тянуться к тэчпаду или мыши, и выделять руками команду. Это лечится настройкой входных данных. Выбираю в меню <pre>Bundles->Edit Bundles...->Man Pages->Menu Actions->Visit Man Page</pre> Слева в настройках нужно установить значение поля <code>input</code> равным <code>word</code>. Здесь же, в редакторе бандлов, можно настроить удобные хоткеи. Они задаются в поле <code>Key Equivalent</code>. Не стоит обделять гуманным сочетанием клавиш и <code>View Man Page</code>. Да, что бы заставить хоткеи работать - мне пришлось удалить значение поля <code>Scope Selector</code>.</p>

<h2 id='_textmate____'>Учим textmate читать маны из консоли.</h2>

<p>И вроде бы, когда я пишу код в TextMate, все круто: если мне нужна справка - жму хоткей - читаю, просвещаюсь, жгу дальше дальше. Но что мне делать, если я тщетно пытаюсь заставить что-то работать прямо в консоли? Получается, что мне и man там же читать? Нет, это никуда не годится. Я решил использовать <a href='https://github.com/textmate/man-pages.tmbundle/blob/master/Support/mman'>bash-скрипт</a>, на котором базируется бандл &#8220;Man Pages&#8221; как обертку к стандартной команде man.</p>

<p>Для начала узнаем, где лежит оригинальный ман.<br /><code>which man</code><br />Скорее всего это <code>/usr/bin/man</code>. Думаю, что бывают исключения.</p>

<p>Для всех скриптов, к которым я лично приложил руку - у меня есть специальный каталог <code>~/.scripts</code>. Каталог прописан в переменной окружения <code>$PATH</code>. Я нахожу это удобным. Краткая инструкция о создании такого каталога:<br /><pre>
<code>mkdir ~/.scripts # Создаем директорию
mate ~/.profile  # Добавляем ее в $PATH</code>
</pre>В открывшемся окне TextMate нужно дописать строчку <pre>export PATH=$HOME/.scripts:$PATH
</pre> Либо, если <code>export PATH</code> уже есть, то дописать в нем, сразу после <code>=</code> <code>$HOME/.scripts:</code>. Создадим в <code>~/.scripts</code> ссылку на наш скрипт:<br /><pre>
<code class='bash'>ln -s /Users/shuvalov/Library/Application\ Support/TextMate/Managed/Bundles/textmate-man-pages.tmbundle/Support/mman ~/.scripts/man</code>
</pre> В этот момент, так как я определил директорию с нашим скриптом раньше всего, стандартный <code>man</code> перестанет работать. Вместо него будет выполняться наш скрипт. Теперь осталось изменить в скрипте вызов <code>man</code> на <code>/usr/bin/man</code> (либо путь до оригинальной команды man). Отрываю файл <pre><code class='bash'>~/Library/Application\ Support/TextMate/Managed/Bundles/textmate-man-pages.tmbundle/Support/mman</code>
</pre> и отредактируем его. (<a href='https://github.com/shuvalov-anton/dot-scripts/blob/a6e615ca211674b57a13a855e297dac3d7fa4c1f/man'>мой пример</a>).<br />Набираем <code>man man</code> и видим результат труда - man-страница открывается в новом окне textmate, переливаясь чинной подсветкой синтаксиса.</p>

<p>Напоследок. Если, просматривая man в textmate, нажать <code>shift+cmd+t</code>, то откроется меню навигации по ману. Только вот, что бы заставить его работать, нужно в последней строчке скрипта изменить значение sleep на 180, продлив время жизни временной страницы: <br /><pre>
<code>(sleep 180; rm -f $tmp) &gt; /dev/null 2&gt;&amp;1 &lt;/dev/null &amp;</code>
</pre></p>

<h2 id='id7'>Заключение.</h2>

<p>Читать маны в textmate2 эпически удобно. Так же, удобно уметь использовать один редактор для всех своих задач и не распыляйться.</p>
    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/2012/06/19/Planetary-Claustrophobia" title="Планетарная клаустрофобия">&larr; Назад</a></li>
      
      
        <li class="next"><a href="/2012/06/30/to-read" title="Что почитать">Вперед &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
  </div>
  
  <div class="span4">
    <h4>Опубликовано</h4>
    <div class="date post-date"><span>23 June 2012</span></div>

  
    <h4>Теги</h4>
    <ul class="tag_box">
    
    


  
     
    	<li><a href="/tags.html#textmate-ref">textmate <sup>5</sup></a></li>
    
  



    </ul>
    
  </div>
  <hr>
  <div class="span8 comments">
      


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'a3heee'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a> -->




  </div>
</div>


		</section>
		<hr>
		<footer>
			<p>
				<span>&copy; Антон Шувалов 2012.</span> <br />
				<span><a href="https://github.com/mojombo/jekyll">Jekyll</a></span> |
				<span><a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a></span> | 
				<span><a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a></span>
			</p>
		</footer>
	</div>
	
	<h1>ANALITYCS</h1>



	
	
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-26825614-2']);
	  var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
	  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	
		var trackingByInterval = (function trackingByInterval () {
			var timerCallback = function timerCallback () {
				_gaq.push(['_trackEvent', 'Reading', 'every 10 sec']);
			}
			setInterval(timerCallback, 5000);
		})();
		(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter19212163 = new Ya.Metrika({id:19212163, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");
	</script>
	<noscript><div><img src="//mc.yandex.ru/watch/19212163" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
	
	<script type="text/javascript" src="/assets/libs/highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

  </body>
</html>
