---
layout: post
title: "Установка rmate для TextMate2"
description: "Инструкция по установке и использованию скрипта rmate для TextMate"
keywords: ["textmate", "textmate2", "rmate", "инструкция", "установка"]
---
 
Решил попробовать в деле одно из нововведений второй версии textmate - rmate. Для того, что бы заставить эту штуку работать нам понадобится: 
 
* Установить ruby на сервере.
* Выполнить в терминале клиента:  

<pre>scp /Applications/TextMate.app/Contents/Frameworks/Preferences.framework/Versions/A/Resources/rmate user@example.com:/usr/local/bin</pre>

Здесь мы отправляем на удаленный сервер скрипт, обеспечиващий работу комманды 
`rmate` (адрес скрипта можно узнать кликнув на слово `rmate` в `preferences > terminal`).
`user@example.com` — это адрес нашего сервера и пользователь, под которым мы
произведем запись файла.  `/usr/local/bin` - это каталог, в котором находятся
наши приложения. Bash в первую очередь будет искать здесь то, что мы пытаемся
запустить в терминале. В принципе, можно указать любой другой каталог, но тогда
запускать `rmate` придется либо явно указывая путь, либо добавив этот путь
в переменную окружения `$PATH`.

* Для того что бы наш сервер мог делегировать редактирование файла редактору
на клиенте - нам нужно установить SSH-туннель. Делается это следующим образом:  

<pre>ssh -R 52698:127.0.0.1:52698 user@example.com</pre>

где `user@example.com` - имя пользователя и адрес удаленного сервера.

Если в `~/.ssh/config` клиента прописать:

<pre>Host example.com
RemoteForward 52698 127.0.0.1:52698</pre>

то тунель будет создаваться автоматически, без необходимости явно его объявлять.

* Проверить работу нашего скрипта, например, написав в консоли `rmate test.txt`. К этому моменту у нас должен быть открыт textmate. Файл test.txt откроется в его новом окне, где его можно редактировать. Сохранив файл, выполним в консоли vim test.txt  и увидим в vim'е все изменения, которые мы внесли с помощью textmate.