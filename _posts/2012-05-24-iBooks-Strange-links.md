---
layout: post
title: "Странные ссылки в iBooks"
description: "Способ сделать ссылку на страницу в Apple iBooks Author"
keywords: "apple, ibooks, author, ссылки, инструкция"
tags: [Apple, ibooks, wtf]
---
{% include JB/setup %}

<img class="img-center" src="http://31808.selcdn.ru/it-prm/pics/hero_ibooks_author.png" alt="iBooks Author"> 
 
Я занимаюсь разработкой книг для iBooks. Одна из задач с которыми я столкнулся в процессе разработки - раелизация таймлайна. Таймлайн должен находиться на каждой странице содержать ссылки на разделы учебника. Сначала у меня были мысли сделать таймлайн с помощью виджета. При подобной реализации у меня были бы развязаны руки для любых извращений в плане дизайна и UX, но я не нашел никакой информаци о существовании какого-бы то ни было API в iBooks, следовательно, я не представлял никакой возможности дотянуться до страниц книги из виджета.   

Я решил воспользоваться стандартным механизмом iBooks - гиперссылками. Прочитав справку к приложению, я решил использовать закладки. План был следующим:

*	Выделяем текст в начале главы. 
*	Создаем из него закладку
*	Создаем ссылку на этот текст в таймлайне. 
*	Применяем шаблон с таймлайном ко всем страницам
*	Профит
	
Но когда я реализовал все это - я уведел совсем не тот результат, на который я расчитывал: при переходе, текст, который являлся закладкой выделялся желтым цветом, как бы намекая на то, что ссылка была именно на него, а не на страницу. Это, конечно, логично, но это было совсем не то, чего я добивался. Мне нужен обычный переход, что бы открылась нужная страница книги, и не происходило никаких лишних вещей. Посмотрим ман ibooks'а внимательней:

>Выберите требуемый вариант во всплывающем меню «Ссылка на».
> 1. Веб-страницу Введите URL-адрес.  
> 2. Сообщение e-mail Введите адрес электронной почты и строку темы.  
> 3. Закладка Выберите закладку во всплывающем меню «Имя».  При отсутствии закладок во всплывающем меню «Имя» добавьте их согласно приведенной ниже инструкции.  
> 4. Рисунок Выберите рисунок в списке «Имя». Для просмотра объектов определенного типа (например, всех фильмов или галерей) выберите требуемый вариант во всплывающем меню «Показать».  

Остановимся подробней на пункте 4 со странным названием "рисунок". Под таким названием переводчики подразумевали все интерактивные элементы книги. Когда я попытался использовать его впервые, то я увидел в списке объектов для ссылок только тесты. Я решил почитать об этой странности, и наткнулся на книгу издательства "O'Reily" [Publishing with iBooks Author](http://shop.oreilly.com/product/0636920025597.do){: rel="nofollow" }. Как это ни странно, книга бесплатна. Скачав книгу, я нашел в ней параграф, касающийся ссылок:
> Author does make it easier to add links to labeled objects, like Galleries (see “Gallery” (page 59)), Media boxes
> (see “Media” (page 60)), and Figures (see “Figures” (page 55)). Select the text that you want to turn into a link, and 
> choose Insert → Hyperlink → Figure Reference. The Link Inspector opens, giving you a list of all the labeled objects 
> in your book to choose from. Click the one you want to link to, and your clickable link is all set.

Ключевое слово - "*labeled*", то есть объект, должен обязательно иметь метку, а все мои картинки, видео и презентации в книге этих меток не имели. Опять обратимся к документации:

> К любому объекту можно добавить заголовок или подпись (или заголовок и подпись одновременно). Заголовок может содержать метку (например, Рисунок или Галерея). Можно создавать пользовательские метки. Если создать для объекта заголовок или подпись, объект будет отображаться в готовой книге и в горизонтальной,  и в вертикальной ориентации. В вертикальной ориентации объекты, имеющие заголовок или подпись, располагаются  вдоль левого края страницы.

Вот она и разгадка страннейшего поведения ссылок в iBooks. Так как вертикальную ориентацию книги я не использую, то у меня не возникало необходимости в использовании меток. Добавив к видео-вступлению, которое идет в начале каждой главы метку, прозрачного цвета (что бы ее не было видно), я получил возможность ссылаться на него, что, в принципе, вполне решает мою задачу. 

Кстати, это удивительно, но ссылки в iBooks author и keynote реализуются совершенно по разному, беспардонно нарушая эвристики Нильсена. Назову пару самых странных отличий:
1. В KeyNote любой объект может являться ссылкой. В iBooks только текст.
2. В KeyNote можно ссылаться на слайды(страницы), в iBooks только на определенные объекты (закладки, интерактивные оъекты с метками).