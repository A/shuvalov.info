---

layout: post
title: "Как создать npm пакеты"
subtitle: 'habrahabr.ru'

---

Создавать npm-пакеты совсем не сложно. И, в ряде случаев, очень полезно. Ниже
я кратко опишу моменты, с которыми я столкнулся, во время публикации 
своего первого модуля.


## Проблема

Типичная ситуация — в проекте существует некий модуль. Модуль развивается, 
становится самостоятельным элементом и копируется в другой проект. Потом 
еще один проект. И еще. 

В каждом проекте модуль обновляется и улучшается, и, в какой-то момент, 
становится не понятно где актуальная версия. Да ладно! «Не понятно где 
актуальная версия»... Вполне возможно, что в каждом проекте у модуля будут 
свои модификации, которые будет достаточно сложно привести в порядок.

Выход достаточно простой — создать отдельный репозиторий для модуля, например 
на [GitHub][] или [Bitbucket][]. Но добавлять репозиторий как субмодуль для 
GIT — [прямой путь к приключениям][Git субмодули]. 

Самый простой способ — создать на основе репозитория `npm-пакет`.

Установить npm-пакет можно с помощью команды `npm install`, а обновить с помощью 
`npm update`.


## Создание пакета


### Файловая структура

Файловая структура может быть совершенно разной. Вполне разумно использовать 
для создания ФС `grunt` или `yo`.


### Репозиторий на GitHub или Bitbucket

Вполне логично будет создать репозиторий на [GitHub][] или [Bitbucket][]. 

Плюсы от Github или Bitbucket:
* Баг-трекер. Можно узнать об ошибках, с которыми сталкиваются люди во время 
  работы с проектом.
* Пул-реквесты.


### Package.json

Для того, что бы опубликовать модуль, нужно правильно заполнить `package.json`.
О том, как это сделать подробно написано в [документации к npm][npm package.json], 
либо [здесь][package.json.nodejitsu.com].


### Публикация в npm

Для того, что бы опубликовать пакет — нужно зарегистрироваться в npm. Д
ля этого, нужно выполнить в консоли:

{:.language-bash}
    npm adduser

После этого нужно будет ввести имя пользователя, пароль и email. Затем можно 
опубликовать пакет, набрав в консоли:

{:.language-bash}
    npm publish

После того, как пакет опубликован — его можно установить с помощью команды 

{:.language-bash}
	npm install

Для удаления пакета из npm существует команда:

{:.language-bash}
	npm unpublish <project>[@<version>]

## PS

Конечно, создание npm-пакетов — это не панацея, и вполне вероятно, что это
подойдет далеко не всем. Я бы назвал это «еще одним путем к удобному
обновлению некоторых компонентов проекта».


[GitHub]: http://github.com
[Bitbucket]: https://bitbucket.org/
[Git субмодули]: http://http://git-scm.com/book/ru/Инструменты-Git-Подмодули#Проблемы-с-подмодулями
[How to Build a Nodejs Npm Package From Scratch.]: http://decodize.com/javascript/build-nodejs-npm-installation-package-scratch/
[grunt-init]: https://github.com/gruntjs/grunt-init
[grunt-init-node]: https://github.com/gruntjs/grunt-init-node
[npm package.json]: https://npmjs.org/doc/json.html
[package.json.nodejitsu.com]: http://package.json.nodejitsu.com/